@using System
@implements IDisposable

<Tab Title="Local">
	@if (string.IsNullOrEmpty(ServiceName))
	{
		<span>It's already set, continue to next step.</span>
	}
	else
	{
		<span>Update with the @ServiceName info</span>
		<pre><code>{
...
</code>
@if(!string.IsNullOrEmpty(ParentSettingsParamName)){ 
<code>
 "@ParentSettingsParamName": {
	"@ChildSettingsParamName": {
		@(string.IsNullOrEmpty(ServiceServer) ? "" : "\"server\": \""+ServiceServer+"\",")
		@(string.IsNullOrEmpty(ServiceHost) ? "" : "\"host\": \""+ServiceHost+"\",")
		@(string.IsNullOrEmpty(ServicePort) ? "" : "\"port\": \""+ServicePort+"\",")
		@(string.IsNullOrEmpty(ServiceUsername) ? "" : "\"username\": \""+ServiceUsername+"\",")
		@(string.IsNullOrEmpty(ServicePassword) ? "" : "\"password\": \""+ServicePassword+"\",")
		@(string.IsNullOrEmpty(ServiceDatabase) ? "" : "\"database\": \""+ServiceDatabase+"\",")
	}
 }</code>
}
	@if (!string.IsNullOrEmpty(SpringApplicationName)) {
<code>	"spring": {
		"application": {
			"name": "@SpringApplicationName"
		}</code>
}
@if (!string.IsNullOrEmpty(SpringServerUri)){
<code>		,"cloud": {
			"config": {
				"uri": "@SpringServerUri",
				"validate_certifates": false
			}
		}
</code>
}
@if (!string.IsNullOrEmpty(SpringApplicationName)) {
<code>	},</code>
}
@if(!string.IsNullOrEmpty(ZipkinEndpoint)){
		<code>"management": {
		"tracing": {
			"alwaysSample": true,
			"useShortTraceIds ": true,
			"exporter": {
				"zipkin": {
					"endpoint": "@(ZipkinEndpoint)",
					"validateCertificates": false,
					"useShortTraceIds ": true
				}
			}
		}
	},</code>
}
@if(!string.IsNullOrEmpty(ManagementEndpointPath)){
<code>
"management": {
	"endpoints": {
		"path": "@ManagementEndpointPath",
		"cloudfoundry": {
			"validateCertificates": false
		}
	},
	"metrics": {
		"exporter": {
			"cloudfoundry": {
				"validateCertificates": false
			}
		}
	}
}</code>
}
@if(!string.IsNullOrEmpty(ShouldRegisterWithEureka)){
<code>	"eureka": {
		"client": {
			@(string.IsNullOrEmpty(EurekaServerUrl) ? "" : "\"serviceUrl\": \"" + EurekaServerUrl + "\",")
			@(string.IsNullOrEmpty(ShouldFetchEurekaRegistry) ? "" : "\"shouldFetchRegistry\": " + ShouldFetchEurekaRegistry + ",")
			"shouldRegisterWithEureka": @ShouldRegisterWithEureka,
			"validateCertificates": false
		},
		"instance": {
			@(string.IsNullOrEmpty(EurekaAppPort) ? "" : "\"port\": \"" + EurekaAppPort + "\",")
			@(string.IsNullOrEmpty(EurekaAppIP) ? "" : "\"ipAddress\": \"" + EurekaAppIP + "\",")
			@(string.IsNullOrEmpty(EurekaAppIP) ? "" : "\"preferIpAddress\": true,")
		}
	}</code>
}
@if(!string.IsNullOrEmpty(ConsulShouldRegister)){
<code>	"consul": {
		"host": "@ConsulHostAddress",
		"port": @ConsulHostPort,
		"discovery": {
			"enabled": true,
			"register": @ConsulShouldRegister,
			@(string.IsNullOrEmpty(ConsolAppPort) ? "" : "\"port\": \"" + ConsolAppPort + "\",")
			@(string.IsNullOrEmpty(ConsolAppIP) ? "" : "\"ipAddress\": \"" + ConsolAppIP + "\",")
			@(string.IsNullOrEmpty(ConsolAppIP) ? "" : "\"preferIpAddress\": true,")
		}
	}</code>
}
<code>
...
}</code></pre>
}
@ChildContent
</Tab>

@code {
	[Parameter]
	public string ServiceName { get; set; } = "";
	[Parameter]
	public string SpringApplicationName { get; set; } = null;
	[Parameter]
	public string SpringServerUri { get; set; } = null;
	[Parameter]
	public string ZipkinEndpoint { get; set; } = null;
	[Parameter]
	public string ManagementEndpointPath { get; set; } = null;
	[Parameter]
	public string ShouldRegisterWithEureka { get; set; } = null;
	[Parameter]
	public string ConsulHostAddress { get; set; } = null;
	[Parameter]
	public string ConsulHostPort { get; set; } = null;
	[Parameter]
	public string ConsulShouldRegister { get; set; } = null;
	[Parameter]
	public string ConsolAppPort { get; set; } = null;
	[Parameter]
	public string ConsolAppIP { get; set; } = null;
	[Parameter]
	public string ProjectName { get; set; } = "";
	[Parameter]
	public string ServiceServer { get; set; } = null;
	[Parameter]
	public string ServiceHost { get; set; } = null;
	[Parameter]
	public string ServicePort { get; set; } = null;
	[Parameter]
	public string ServiceUsername { get; set; } = null;
	[Parameter]
	public string ServicePassword { get; set; } = null;
	[Parameter]
	public string ServiceDatabase { get; set; } = null;
	[Parameter]
	public string ParentSettingsParamName { get; set; } = "";
	[Parameter]
	public string ChildSettingsParamName { get; set; } = null;
	[Parameter]
	public string EurekaServerUrl { get; set; } = null;
	[Parameter]
	public string EurekaAppPort { get; set; } = null;
	[Parameter]
	public string ShouldFetchEurekaRegistry { get; set; } = null;
	[Parameter]
	public string EurekaAppIP { get; set; } = null;

	[Parameter]
	public RenderFragment ChildContent { get; set; }

	protected override void OnInitialized()
	{
	}

	public void Dispose()
	{
	}
}