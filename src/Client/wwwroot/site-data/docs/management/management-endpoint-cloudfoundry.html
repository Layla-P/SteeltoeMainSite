<h3 id="cloud-foundry">Cloud Foundry</h3>
<p>The primary purpose of this endpoint is to enable integration with the Pivotal Apps Manager. This endpoint is similar to Hypermedia Actuator but is preconfigured for Apps Manager integration. When used, the Steeltoe Cloud Foundry management endpoint enables the following additional functionality on Cloud Foundry:</p>
<ul>
<li>Provides an alternate, secured route to the endpoints expected by Apps Manager and configured in your application</li>
<li>Exposes an endpoint that can be queried to return the IDs of and links to the enabled management endpoints in the application.</li>
<li>Adds Cloud Foundry security middleware to the request pipeline, to secure access to the management endpoints by using security tokens acquired from the UAA.</li>
<li>Adds extension methods that simplify adding the Steeltoe management endpoints necessary for Apps Manager integration with HTTP access to the application.</li>
</ul>
<p>When adding this management endpoint to your application, the <a href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/CloudFoundry/CloudFoundrySecurityMiddleware.cs">Cloud Foundry security middleware</a> is added to the request processing pipeline of your application to enforce that when a request is made of any of the management endpoints, a valid UAA access token is provided as part of that request. Additionally, the security middleware uses the token to determine whether the authenticated user has permissions to access the management endpoint.</p>
<blockquote class="blockquote">
<p>NOTE: The Cloud Foundry security middleware is automatically disabled when your application is not running on Cloud Foundry (for example, running locally on your desktop).</p>
</blockquote>
<h4 id="configure-settings">Configure Settings</h4>
<p>Typically, you need not do any additional configuration. However, the following table describes the additional settings that you could apply to the Cloud Foundry endpoint:</p>
<table class="table">
<thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>The ID of the Cloud Foundry endpoint</td>
<td>&quot;&quot;</td>
</tr>
<tr>
<td>enabled</td>
<td>Whether to enable Cloud Foundry management endpoint</td>
<td>true</td>
</tr>
<tr>
<td>validateCertificates</td>
<td>Whether to validate server certificates</td>
<td>true</td>
</tr>
<tr>
<td>applicationId</td>
<td>The ID of the application used in permissions check</td>
<td>VCAP settings</td>
</tr>
<tr>
<td>cloudFoundryApi</td>
<td>The URL of the Cloud Foundry API</td>
<td>VCAP settings</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:cloudfoundry</code></strong>.</p>
<h4 id="enable-http-access">Enable HTTP Access</h4>
<p>The default path to the Cloud Foundry endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/cloudfoundryapplication</code>.</p>
<p>The coding steps you take to enable HTTP access to the endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>
<h5 id="asp.net-core-app">ASP.NET Core App</h5>
<p>Refer to the <a href="#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>
<p>To add the Cloud Foundry actuator to the service container, you can use the <code>AddCloudFoundryActuator()</code> extension method from <a href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/CloudFoundry/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>
<p>To add the Cloud Foundry actuator and security middleware to the ASP.NET Core pipeline, use the <code>UseCloudFoundryActuator()</code> and <code>UseCloudFoundrySecurity()</code> extension methods from <a href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/CloudFoundry/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>
<h5 id="asp.net-4.x-app">ASP.NET 4.x App</h5>
<p>Refer to the <a href="#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>
<p>To add the Cloud Foundry actuator endpoint, use the <code>UseCloudFoundrySecurity()</code> and <code>UseCloudFoundryActuator()</code> methods from <a href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>
<h5 id="asp.net-owin-app">ASP.NET OWIN App</h5>
<p>Refer to the <a href="#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>
<p>To add the Cloud Foundry actuator and security middleware to the ASP.NET OWIN pipeline, use the <code>UseCloudFoundryActuator()</code> from <a href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/CloudFoundry/CloudFoundryEndpointAppBuilderExtensions.cs">CloudFoundryEndpointAppBuilderExtensions</a>.
and <code>UseCloudFoundrySecurityMiddleware()</code> from <a href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/CloudFoundry/CloudFoundrySecurityAppBuilderExtensions.cs">CloudFoundrySecurityAppBuilderExtensions</a>.</p>
