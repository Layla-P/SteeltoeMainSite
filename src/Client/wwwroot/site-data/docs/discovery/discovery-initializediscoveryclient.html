<h2 id="initialize-discovery-client">Initialize Discovery Client</h2>
<h3 id="asp.net-core">ASP.NET Core</h3>
<p>The next step is to add the Steeltoe Discovery client to the service container and use it to cause the client to start communicating with the server.</p>
<p>As of version 2.4.0, you can do both of these two things at once with extension methods that have been added for both <code>IHostBuilder</code> and <code>IWebHostBuilder</code>. The following example uses <code>IHostBuilder</code>, and usage is the same for <code>IWebHostBuilder</code>:</p>
<pre><code class="language-csharp">public class Program
{
    public static void Main(string[] args)
    {
        BuildWebHost(args).Run();
    }
    public static IHost BuildHost(string[] args) =&gt;
        Host.CreateDefaultBuilder(args)
            .AddServiceDiscovery()
            .Build();
</code></pre>
<p>These new extensions provide a convenient way to register and activate the discovery client. You may alternatively register and activate the client in the <code>ConfigureServices()</code> and <code>Configure()</code> methods of the <code>Startup</code> class, as shown in the following example:</p>
<pre><code class="language-csharp">using Steeltoe.Discovery.Client;

public class Startup {
    ...
    public IConfiguration Configuration { get; private set; }
    public Startup(...)
    {
      ...
    }
    public void ConfigureServices(IServiceCollection services)
    {
        // Add Steeltoe Discovery Client service
        services.AddDiscoveryClient(Configuration);

        // Add framework services.
        services.AddMvc();
        ...
    }
    public void Configure(IApplicationBuilder app, ...)
    {
        ...
        app.UseStaticFiles();
        app.UseMvc();

        // Use the Steeltoe Discovery Client service
        app.UseDiscoveryClient();
    }
    ...
</code></pre>
<blockquote class="blockquote">
<p>NOTE: The <code>Pivotal.Discovery.*</code> packages have been deprecated, with all functionality rolled into the Steeltoe packages. Update your references and using statements to use the Steeltoe packages.</p>
</blockquote>
<h3 id="asp.net">ASP.NET</h3>
<h3 id="registering-services">Registering Services</h3>
<p>If you configured the clients settings to register services, the service is automatically registered when the <code>UseDiscoveryClient()</code> method is called in the <code>Configure()</code> method. You do not need to do anything else to cause service registration.</p>
<p>See the <a href="#2-2-2-eureka-client-settings">Eureka Client Settings</a> or <a href="#3-0-hashicorp-consul">Consul Client Settings</a></p>
