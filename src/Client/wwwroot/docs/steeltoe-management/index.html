<!DOCTYPE html>
<!-- saved from url=(0048) -->
<html class="gr__steeltoe_io">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta content="IE=edge" http-equiv="X-UA-Compatible">

	<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">

	<!-- Use title if it's in the page YAML frontmatter -->
	<link href="images/favicon.png" rel="icon" type="image/png">
	<link rel="stylesheet" href="/stylesheets/css.css">
	<link href="/stylesheets/site.css" rel="stylesheet">
	<link href="/stylesheets/tocbot.css" rel="stylesheet">
</head>
<body class="docs docs_steeltoe-management docs_steeltoe-management_index" data-gr-c-s-loaded="true">

	<div class="max-width-4 mx-auto">
		<div class="">
			<div class="sm-flex">
				<div class="col-12 sm-col-3 sm-pr3">

					<div id="toc" class="">
						<div class="toc-link border-bottom border-silver js-toc"><ul class="toc-list "><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#0-0-initialize-dev-environment" class="toc-link node-name--H1  is-active-link">0.0 Initialize Dev Environment</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-0-management-endpoints" class="toc-link node-name--H1 ">1.0 Management Endpoints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-quick-start" class="toc-link node-name--H2 ">1.1 Quick Start</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-1-locate-sample" class="toc-link node-name--H3 ">1.1.1 Locate Sample</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-2-create-service" class="toc-link node-name--H3 ">1.1.2 Create Service</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-3-publish-sample" class="toc-link node-name--H3 ">1.1.3 Publish Sample</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-4-push-sample" class="toc-link node-name--H3 ">1.1.4 Push Sample</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-5-observe-logs" class="toc-link node-name--H3 ">1.1.5 Observe Logs</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-6-accessing-endpoints" class="toc-link node-name--H3 ">1.1.6 Accessing Endpoints</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-1-7-understand-sample" class="toc-link node-name--H3 ">1.1.7 Understand Sample</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-usage" class="toc-link node-name--H2 ">1.2 Usage</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-1-add-nuget-references" class="toc-link node-name--H3 ">1.2.1 Add NuGet References</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-2-configure-global-settings" class="toc-link node-name--H3 ">1.2.2 Configure Global Settings</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-3-exposing-endpoints" class="toc-link node-name--H4 ">1.2.3 Exposing Endpoints</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-3-hypermedia" class="toc-link node-name--H3 ">1.2.3 Hypermedia</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-3-1-configure-settings" class="toc-link node-name--H4 ">1.2.3.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-3-2-enable-http-access" class="toc-link node-name--H4 ">1.2.3.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-3-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.3.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-3-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.3.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-3-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.3.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-4-cloud-foundry" class="toc-link node-name--H3 ">1.2.4 Cloud Foundry</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-4-1-configure-settings" class="toc-link node-name--H4 ">1.2.4.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-4-2-enable-http-access" class="toc-link node-name--H4 ">1.2.4.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-4-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.4.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-4-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.4.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-4-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.4.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-5-health" class="toc-link node-name--H3 ">1.2.5 Health</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-5-1-health-contributors" class="toc-link node-name--H4 ">1.2.5.1 Health Contributors</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-5-2-configure-settings" class="toc-link node-name--H4 ">1.2.5.2 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-5-3-enable-http-access" class="toc-link node-name--H4 ">1.2.5.3 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-5-3-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.5.3.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-5-3-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.5.3.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-5-3-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.5.3.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-6-info" class="toc-link node-name--H3 ">1.2.6 Info</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-6-1-info-contributors" class="toc-link node-name--H4 ">1.2.6.1 Info Contributors</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-6-2-configure-settings" class="toc-link node-name--H4 ">1.2.6.2 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-6-3-enable-http-access" class="toc-link node-name--H4 ">1.2.6.3 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-6-3-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.6.3.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-6-3-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.6.3.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-6-3-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.6.3.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-7-loggers" class="toc-link node-name--H3 ">1.2.7 Loggers</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-7-1-configure-settings" class="toc-link node-name--H4 ">1.2.7.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-7-2-enable-http-access" class="toc-link node-name--H4 ">1.2.7.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-7-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.7.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-7-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.7.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-7-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.7.2.3 ASP.NET OWIN App</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-7-3-interacting-with-the-loggers-actuator" class="toc-link node-name--H4 ">1.2.7.3 Interacting with the Loggers Actuator</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-8-tracing" class="toc-link node-name--H3 ">1.2.8 Tracing</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-8-1-configure-settings" class="toc-link node-name--H4 ">1.2.8.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-8-2-enable-http-access" class="toc-link node-name--H4 ">1.2.8.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-8-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.8.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-8-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.8.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-8-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.8.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-9-thread-dump" class="toc-link node-name--H3 ">1.2.9 Thread Dump</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-9-1-configure-settings" class="toc-link node-name--H4 ">1.2.9.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-9-2-enable-http-access" class="toc-link node-name--H4 ">1.2.9.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-9-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.9.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-9-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.9.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-9-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.9.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-10-heap-dump" class="toc-link node-name--H3 ">1.2.10 Heap Dump</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-10-1-configure-settings" class="toc-link node-name--H4 ">1.2.10.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-10-2-enable-http-access" class="toc-link node-name--H4 ">1.2.10.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-10-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.10.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-10-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.10.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-10-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.10.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-11-env" class="toc-link node-name--H3 ">1.2.11 Env</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-11-1-configure-settings" class="toc-link node-name--H4 ">1.2.11.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-11-2-enable-http-access" class="toc-link node-name--H4 ">1.2.11.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-11-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.11.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-11-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.11.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-11-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.11.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-12-refresh" class="toc-link node-name--H3 ">1.2.12 Refresh</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-12-1-configure-settings" class="toc-link node-name--H4 ">1.2.12.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-12-2-enable-http-access" class="toc-link node-name--H4 ">1.2.12.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-12-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.12.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-12-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.12.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-12-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.12.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-13-mappings" class="toc-link node-name--H3 ">1.2.13 Mappings</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-13-1-configure-settings" class="toc-link node-name--H4 ">1.2.13.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-13-2-enable-http-access" class="toc-link node-name--H4 ">1.2.13.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-13-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.13.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-13-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.13.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-13-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.13.2.3 ASP.NET OWIN App</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-metrics" class="toc-link node-name--H3 ">1.2.14 Metrics</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-1-configure-settings" class="toc-link node-name--H4 ">1.2.14.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-2-enable-http-access" class="toc-link node-name--H4 ">1.2.14.2 Enable HTTP Access</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-2-1-asp-net-core-app" class="toc-link node-name--H5 ">1.2.14.2.1 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-2-2-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.14.2.2 ASP.NET 4.x App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-2-3-asp-net-owin-app" class="toc-link node-name--H5 ">1.2.14.2.3 ASP.NET OWIN App</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-3-exporting" class="toc-link node-name--H4 ">1.2.14.3 Exporting</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-3-1-add-nuget-references" class="toc-link node-name--H5 ">1.2.14.3.1 Add NuGet References</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-3-2-cloud-foundry-forwarder" class="toc-link node-name--H5 ">1.2.14.3.2 Cloud Foundry Forwarder</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-3-2-1-configure-settings" class="toc-link node-name--H5 ">1.2.14.3.2.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-3-2-2-asp-net-core-app" class="toc-link node-name--H5 ">1.2.14.3.2.2 ASP.NET Core App</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#1-2-14-3-2-3-asp-net-4-x-app" class="toc-link node-name--H5 ">1.2.14.3.2.3 ASP.NET 4.x App</a></li></ul></li></ul></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-0-distributed-tracing" class="toc-link node-name--H1 ">2.0 Distributed Tracing</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-quick-start" class="toc-link node-name--H2 ">2.1 Quick Start</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-1-running-locally" class="toc-link node-name--H3 ">2.1.1 Running Locally</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-1-1-start-eureka-server" class="toc-link node-name--H4 ">2.1.1.1 Start Eureka Server</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-1-2-start-zipkin-server" class="toc-link node-name--H4 ">2.1.1.2 Start Zipkin Server</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-1-3-locate-sample" class="toc-link node-name--H4 ">2.1.1.3 Locate Sample</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-1-4-run-fortune-teller" class="toc-link node-name--H4 ">2.1.1.4 Run Fortune Teller</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-1-5-observe-logs" class="toc-link node-name--H4 ">2.1.1.5 Observe Logs</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-1-6-view-traces" class="toc-link node-name--H4 ">2.1.1.6 View Traces</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-running-on-cloud-foundry" class="toc-link node-name--H3 ">2.1.2 Running on Cloud Foundry</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-1-start-eureka-server" class="toc-link node-name--H4 ">2.1.2.1 Start Eureka Server</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-2-start-zipkin-server" class="toc-link node-name--H4 ">2.1.2.2 Start Zipkin Server</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-3-configure-settings" class="toc-link node-name--H4 ">2.1.2.3 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-4-publish-both-applications" class="toc-link node-name--H4 ">2.1.2.4 Publish Both Applications</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-5-push-both-applications" class="toc-link node-name--H4 ">2.1.2.5 Push Both Applications</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-6-observe-logs" class="toc-link node-name--H4 ">2.1.2.6 Observe Logs</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-2-7-view-traces" class="toc-link node-name--H4 ">2.1.2.7 View Traces</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-1-3-understanding-the-sample" class="toc-link node-name--H3 ">2.1.3 Understanding the Sample</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-2-usage" class="toc-link node-name--H2 ">2.2 Usage</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-2-1-add-nuget-references" class="toc-link node-name--H3 ">2.2.1 Add NuGet References</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-2-2-configure-settings" class="toc-link node-name--H3 ">2.2.2 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-2-3-enabling-log-correlation" class="toc-link node-name--H3 ">2.2.3 Enabling Log Correlation</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-2-4-propagating-trace-context" class="toc-link node-name--H3 ">2.2.4 Propagating Trace Context</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-2-5-add-distributed-tracing" class="toc-link node-name--H3 ">2.2.5 Add Distributed Tracing</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-3-exporting" class="toc-link node-name--H2 ">2.3 Exporting</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-3-1-add-nuget-references" class="toc-link node-name--H3 ">2.3.1 Add NuGet References</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-3-2-zipkin-server" class="toc-link node-name--H3 ">2.3.2 Zipkin Server</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-3-2-1-configure-settings" class="toc-link node-name--H4 ">2.3.2.1 Configure Settings</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#2-3-2-2-add-and-use-zipkin-exporter" class="toc-link node-name--H4 ">2.3.2.2 Add and Use Zipkin Exporter</a></li></ul></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#3-0-management-tasks" class="toc-link node-name--H1 ">3.0 Management Tasks</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#3-1-usage" class="toc-link node-name--H2 ">3.1 Usage</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#3-1-1-add-nuget-reference" class="toc-link node-name--H3 ">3.1.1 Add NuGet Reference</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#3-1-2-implement-iapplicationtask" class="toc-link node-name--H3 ">3.1.2 Implement IApplicationTask</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#3-1-3-add-task-to-servicecollection" class="toc-link node-name--H3 ">3.1.3 Add Task to ServiceCollection</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#3-1-4-apply-extension-method" class="toc-link node-name--H3 ">3.1.4 Apply Extension Method</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#3-1-5-invoke-task" class="toc-link node-name--H3 ">3.1.5 Invoke Task</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#common-steps" class="toc-link node-name--H1 ">Common Steps</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#publish-sample" class="toc-link node-name--H2 ">Publish Sample</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#asp-net-core" class="toc-link node-name--H3 ">ASP.NET Core</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#asp-net-4-x" class="toc-link node-name--H3 ">ASP.NET 4.x</a></li></ul></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#push-sample" class="toc-link node-name--H2 ">Push Sample</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core" class="toc-link node-name--H2 ">HTTP Access ASP.NET Core</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x" class="toc-link node-name--H2 ">HTTP Access ASP.NET 4.x</a></li><li class="toc-list-item"><a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin" class="toc-link node-name--H2 ">HTTP Access ASP.NET OWIN</a></li></ul></li></ul></div>
					</div>
				</div>
				<div class="col-12 sm-col-9 js-toc-content">
					<h1 class="js-toc-ignore regular">Management</h1>
					<p>Steeltoe includes a number of optional features you can add to your applications to aid in monitoring and managing it while it runs in production. These features are implemented as a number of management endpoints that you can easily add to your application.</p>

					<p>The way the endpoints are exposed and used depends on the type of technology you choose in exposing the functionality of the endpoint. Out of the box, Steeltoe provides several easy ways to expose these endpoints over HTTP in .NET applications. Of course, you can build and use whatever you would like to meet your needs.</p>

					<p>When you expose the endpoints over HTTP, you can also integrate the endpoints with the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-0/console/index.html">Pivotal Apps Manager</a>. You should read the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-0/console/using-actuators.html">Using Actuators with Apps Manager section</a> of the Pivotal Cloud Foundry documentation for more details.</p>

					<blockquote>
						<p>NOTE: Depending on your hosting environment, service instances you create for the purpose of exploring the Quick Starts on this page may have a cost associated.</p>
					</blockquote>

					<h1 id="1-0-management-endpoints">1.0 Management Endpoints</h1>

					<p>The following table describes all of the currently available Steeltoe management endpoints:</p>

					<table>
						<thead>
							<tr>
								<th>ID</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><strong>hypermedia</strong></td>
								<td>Provides hypermedia endpoint for discovery of all available endpoints</td>
							</tr>
							<tr>
								<td><strong>cloudfoundry</strong></td>
								<td>Enables management endpoint integration with Pivotal Cloud Foundry</td>
							</tr>
							<tr>
								<td><strong>health</strong></td>
								<td>Customizable endpoint that reports application health information</td>
							</tr>
							<tr>
								<td><strong>info</strong></td>
								<td>Customizable endpoint that reports arbitrary application information (such as Git Build info and other details)</td>
							</tr>
							<tr>
								<td><strong>loggers</strong></td>
								<td>Allows remote access and modification of logging levels in a .NET application</td>
							</tr>
							<tr>
								<td><strong>trace</strong></td>
								<td>Reports a configurable set of trace information (such as the last 100 HTTP requests)</td>
							</tr>
							<tr>
								<td><strong>refresh</strong></td>
								<td>Triggers the application configuration to be reloaded</td>
							</tr>
							<tr>
								<td><strong>env</strong></td>
								<td>Reports the keys and values from the applications configuration</td>
							</tr>
							<tr>
								<td><strong>mappings</strong></td>
								<td>Reports the configured ASP.NET routes and route templates</td>
							</tr>
							<tr>
								<td><strong>metrics</strong></td>
								<td>Reports the collected metrics for the application</td>
							</tr>
							<tr>
								<td><strong>dump</strong></td>
								<td>Generates and reports a snapshot of the applications threads (Windows only)</td>
							</tr>
							<tr>
								<td><strong>heapdump</strong></td>
								<td>Generates and downloads a mini-dump of the application (Windows only)</td>
							</tr>
						</tbody>
					</table>

					<p>More detail on each endpoint is provided in upcoming sections.</p>

					<p>Note that the Steeltoe Management endpoints themselves support the following .NET application types:</p>

					<ul>
						<li>ASP.NET Core and ASP.NET 4.x</li>
						<li>Console apps (.NET Framework and .NET Core)</li>
					</ul>

					<p>Steeltoe currently includes support for exposing the Management endpoints over HTTP with ASP.NET.</p>

					<p>There are other Steeltoe sample applications that you can refer to in order to help you understand how to use these endpoints, including:</p>

					<ul>
						<li><a target="_blank" href="https://github.com/SteeltoeOSS/Samples/tree/master/MusicStore">MusicStore</a>: A sample application showing how to use all of the Steeltoe components together in a ASP.NET Core application. This is a microservices-based application built from the ASP.NET Core MusicStore reference application provided by Microsoft.</li>
					</ul>

					<p>Steeltoe provides a base set of endpoint functionality, along with several implementations for exposing the endpoints over HTTP. HTTP implementations are provided with ASP.NET Core middleware, OWIN middleware and HTTP Modules. Should you wish to expose the core endpoint functionality over some protocol other than HTTPS, you are free to provide your own implementation.</p>

					<p>Regardless of the endpoint exposure method you select, you should understand how the .NET <a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration">Configuration service</a> works before starting to use the management endpoints. You need at least a basic understanding of the <code>ConfigurationBuilder</code> and how to add providers to the builder to configure the endpoints.</p>

					<p>When developing ASP.NET Core applications, you should also understand how the ASP.NET Core <a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/startup">Startup</a> class is used in configuring the application services for the app. Pay particular attention to the usage of the <code>ConfigureServices()</code> and <code>Configure()</code> methods.</p>

					<p>When adding Steeltoe Management endpoints to your ASP.NET 4.x applications, you can choose between using HTTP modules and OWIN middleware. If you select HTTP modules, you should be familiar with <code>Global.asax.cs</code> and how it is used in initializing and configuring your application. If you select the OWIN middleware approach, you should be familiar with how the Startup class is used in configuring application middleware. The rest of this document will refer to the HTTP Module implementation simply as ASP.NET 4.x, and the OWIN implementation as ASP.NET OWIN.</p>

					<blockquote>
						<p>NOTE: You may wish to select the OWIN implementation for your ASP.NET 4.x application when you don’t want to depend on <code>System.Web</code> or you also plan to use <a href="https://steeltoe.io/docs/steeltoe-security">Steeltoe security providers</a> for authentication/authorization on Cloud Foundry.</p>
					</blockquote>

					<p>The following table describes the available Steeltoe management endpoints that can be used in an application:</p>

					<table>
						<thead>
							<tr>
								<th>ID</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><strong>hypermedia</strong></td>
								<td>Provides hypermedia endpoint for discovery of all available endpoints</td>
							</tr>
							<tr>
								<td><strong>cloudfoundry</strong></td>
								<td>Enables management endpoint integration with Cloud Foundry</td>
							</tr>
							<tr>
								<td><strong>health</strong></td>
								<td>Customizable endpoint that gathers application health information</td>
							</tr>
							<tr>
								<td><strong>info</strong></td>
								<td>Customizable endpoint that gathers arbitrary application information (such as Git Build info)</td>
							</tr>
							<tr>
								<td><strong>loggers</strong></td>
								<td>Gathers existing loggers and allows modification of logging levels</td>
							</tr>
							<tr>
								<td><strong>trace</strong></td>
								<td>Gathers a configurable set of trace information (such as the last 100 HTTP requests)</td>
							</tr>
							<tr>
								<td><strong>refresh</strong></td>
								<td>Triggers the application configuration to be reloaded</td>
							</tr>
							<tr>
								<td><strong>env</strong></td>
								<td>Reports the keys and values from the applications configuration</td>
							</tr>
							<tr>
								<td><strong>mappings</strong></td>
								<td>Reports the configured ASP.NET routes and route templates</td>
							</tr>
							<tr>
								<td><strong>metrics</strong></td>
								<td>Reports the collected metrics for the application</td>
							</tr>
							<tr>
								<td><strong>dump</strong></td>
								<td>Generates and reports a snapshot of the application’s threads (Windows only)</td>
							</tr>
							<tr>
								<td><strong>heapdump</strong></td>
								<td>Generates and downloads a mini-dump of the application (Windows only)</td>
							</tr>
						</tbody>
					</table>

					<p>Each endpoint has an associated ID. When you want to expose that endpoint over HTTP, that ID is used in the mapped URL that exposes the endpoint. For example, the <code>health</code> endpoint below is mapped to <code>/health</code>.</p>

					<blockquote>
						<p>NOTE: When you want to integrate with the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-0/console/index.html">Pivotal Apps Manager</a>, you need to configure the global management path prefix, as described in the <a href="https://steeltoe.io/docs/steeltoe-management/#1-2-2-settings">Endpoint Settings</a> section, to be <code>/cloudfoundryapplication</code>. To do so, add <code>management:endpoints:path=/cloudfoundryapplication</code> to your configuration.</p>
					</blockquote>

					<h3 id="1-2-1-add-nuget-references">1.2.1 Add NuGet References</h3>

					<p>To use the management endpoints, you need to add a reference to the appropriate Steeltoe NuGet based on the type of the application you are building and what Dependency Injector you have chosen, if any.</p>

					<p>The following table describes the available packages:</p>

					<table>
						<thead>
							<tr>
								<th>App Type</th>
								<th>Package</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>All</td>
								<td><code>Steeltoe.Management.EndpointBase</code></td>
								<td>Base functionality, no dependency injection, no HTTP middleware.</td>
							</tr>
							<tr>
								<td>ASP.NET Core</td>
								<td><code>Steeltoe.Management.EndpointCore</code></td>
								<td>Includes <code>EndpointBase</code>, adds ASP.NET Core DI, includes HTTP middleware,  no Pivotal Apps Manager integration.</td>
							</tr>
							<tr>
								<td>ASP.NET Core</td>
								<td><code>Steeltoe.Management.CloudFoundryCore</code></td>
								<td>Includes <code>EndpointCore</code>, enables Pivotal Apps Manager integration.</td>
							</tr>
							<tr>
								<td>ASP.NET 4.x</td>
								<td><code>Steeltoe.Management.EndpointWeb</code></td>
								<td>Includes <code>EndpointBase</code>, enables Pivotal Apps Manager integration.</td>
							</tr>
							<tr>
								<td>ASP.NET 4.x OWIN</td>
								<td><code>Steeltoe.Management.EndpointOwin</code></td>
								<td>Includes <code>EndpointBase</code>, enables Pivotal Apps Manager integration.</td>
							</tr>
							<tr>
								<td>ASP.NET 4.x OWIN with Autofac</td>
								<td><code>Steeltoe.Management.EndpointOwin.Autofac</code></td>
								<td>Includes <code>EndpointOwin</code>, adds Autofac DI, enables Pivotal Apps Manager integration.</td>
							</tr>
						</tbody>
					</table>

					<p>To add this type of NuGet to your project, add a <code>PackageReference</code> resembling the following:</p>

<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">ItemGroup</span>&gt;</span>
...
    <span class="hljs-tag">&lt;<span class="hljs-name">PackageReference</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"Steeltoe.Management.EndpointCore"</span> <span class="hljs-attr">Version</span>= <span class="hljs-string">"2.2.0"</span>/&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">ItemGroup</span>&gt;</span>
</code></pre>

<p>or</p>

<pre><code class="powershell hljs css"><span class="hljs-selector-tag">PM</span>&gt;<span class="hljs-selector-tag">Install-Package</span>  <span class="hljs-selector-tag">Steeltoe</span><span class="hljs-selector-class">.Management</span><span class="hljs-selector-class">.EndpointWeb</span> <span class="hljs-selector-tag">-Version</span> 2<span class="hljs-selector-class">.2</span><span class="hljs-selector-class">.0</span>
</code></pre>

					<h3 id="1-2-2-configure-global-settings">1.2.2 Configure Global Settings</h3>

					<p>Endpoints can be configured by using the normal .NET <a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration">Configuration service</a>. You can globally configure settings that apply to all endpoints as well as configure settings that are specific to a particular endpoint.</p>

					<p>All management endpoint settings should be placed under the prefix with the key <code>management:endpoints</code>. Any settings found under this prefix apply to all endpoints globally.</p>

					<p>Settings that you want to apply to specific endpoints should be placed under the prefix with the key <code>management:endpoints:</code> + ID (for example, <code>management:endpoints:health</code>). Any settings you apply to a specific endpoint override any settings applied globally.</p>

					<p>The following table describes the settings that you can apply globally:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>enabled</td>
								<td>Whether to enable all management endpoints</td>
								<td>true</td>
							</tr>
							<tr>
								<td>path</td>
								<td>The path prefix applied to all endpoints when exposed over HTTP</td>
								<td><code>/</code></td>
							</tr>
						</tbody>
					</table>

					<p>When you want to integrate with the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-0/console/index.html">Pivotal Apps Manager</a>, you need to configure the global management path prefix to be <code>/cloudfoundryapplication</code>.</p>

					<h4 id="1-2-3-exposing-endpoints">1.2.3 Exposing Endpoints</h4>

					<p>Since endpoints may contain sensitive information, only Health and Info are exposed by default. To change which endpoints are exposed, use the <code>include</code> and <code>exclude</code> properties:</p>

					<table>
						<thead>
							<tr>
								<th>Property</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>exposure:include</td>
								<td>[<code>info</code>, <code>health</code>]</td>
							</tr>
							<tr>
								<td>exposure:exclude</td>
								<td></td>
							</tr>
						</tbody>
					</table>

					<p>
						<strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:actuator</code></strong>. To select all endpoints,
						<code>*</code>  can be used. For example, to expose everything except <code>env</code> and <code>refresh</code>, use the following property:
					</p>

<pre><code class="json hljs"><span class="hljs-string">"management"</span>: {
  <span class="hljs-attr">"endpoints"</span>: {
    <span class="hljs-attr">"actuator"</span>:{
      <span class="hljs-attr">"exposure"</span>: {
        <span class="hljs-attr">"include"</span>: [ <span class="hljs-string">"*"</span> ],
        <span class="hljs-attr">"exclude"</span>: [ <span class="hljs-string">"env"</span>, <span class="hljs-string">"refresh"</span>]
      }
    }
  }
}
</code></pre>

					<blockquote>
						<p>NOTE: The exposure settings do not apply to endpoint routes mapped to the /cloudfoundryapplication context. If you add the Cloud Foundry endpoint, it will provide a route to access all endpoints without respecting the exposure settings through either the global path specified or its default of “/actuator”. On the contrary, if you do not add either the Cloud Foundry or Hypermedia actuators, the default settings still apply. Adding endpoints other than health and info will require you to explicitly set the exposure setting. </p>
					</blockquote>

					<p>The upcoming sections show the settings that you can apply to specific endpoints.</p>

					<h3 id="1-2-3-hypermedia">1.2.3 Hypermedia</h3>

					<p>
						The purpose of this endpoint is to provide hypermedia for all the management endpoints configured in your application.
						It also creates a base context path from which the endpoints can be accessed. The hypermedia actuator enables the following functionality:
					</p>

					<ul>
						<li>Exposes an endpoint that can be queried to return the IDs of and links to all of the enabled management endpoints in the application.</li>
						<li>Adds extension methods that simplify adding all of the Steeltoe management endpoints with HTTP access to the application.</li>
					</ul>

					<blockquote>
						<p>NOTE: Adding Cloud Foundry and Hypermedia endpoint together will allow Pivotal Apps Manager integration along with the ability to access these endpoints on another route (by default /actuator). Using Cloud Foundry endpoint without Hypermedia endpoint allows Apps Manager integration, however  external clients cannot access the endpoints.  When Apps Manager integration is not needed the Hypermedia endpoint can be used by itself.</p>
					</blockquote>

					<h4 id="1-2-3-1-configure-settings">1.2.3.1 Configure Settings</h4>

					<p>The following table describes the additional settings that you could apply to the Hypermedia endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the Hypermedia endpoint</td>
								<td>“”</td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the Hypermedia endpoint</td>
								<td>true</td>
							</tr>
						</tbody>
					</table>

					<h4 id="1-2-3-2-enable-http-access">1.2.3.2 Enable HTTP Access</h4>

					<p>The default path to the Hypermedia endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/actuator</code>.</p>

					<p>The coding steps you take to enable HTTP access to the endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-3-2-1-asp-net-core-app">1.2.3.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Cloud Foundry actuator to the service container, you can use the <code>AddHypermediaActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Hypermedia/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Cloud Foundry actuator and security middleware to the ASP.NET Core pipeline, use the <code>UseHypermediaActuator()</code>  extension methods from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Hypermedia/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-3-2-2-asp-net-4-x-app">1.2.3.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Hypermedia actuator endpoint, use the <code>UseHypermediaActuator()</code> methods from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-3-2-3-asp-net-owin-app">1.2.3.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Hypermedia actuator to the ASP.NET OWIN pipeline, use the <code>UseHypermediaActuator()</code> from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Hypermedia/HypermediaEndpointAppBuilderExtensions.cs">HypermediaEndpointAppBuilderExtensions</a>.</p>

					<h3 id="1-2-4-cloud-foundry">1.2.4 Cloud Foundry</h3>

					<p>The primary purpose of this endpoint is to enable integration with the Pivotal Apps Manager. This endpoint is similar to Hypermedia Actuator but is preconfigured for Apps Manager integration. When used, the Steeltoe Cloud Foundry management endpoint enables the following additional functionality on Cloud Foundry:</p>

					<ul>
						<li>Provides an alternate, secured route to the endpoints expected by Apps Manager and configured in your application</li>
						<li>Exposes an endpoint that can be queried to return the IDs of and links to the enabled management endpoints in the application.</li>
						<li>Adds Cloud Foundry security middleware to the request pipeline, to secure access to the management endpoints by using security tokens acquired from the UAA.</li>
						<li>Adds extension methods that simplify adding the Steeltoe management endpoints necessary for Apps Manager integration with HTTP access to the application.</li>
					</ul>

					<p>When adding this management endpoint to your application, the <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/CloudFoundry/CloudFoundrySecurityMiddleware.cs">Cloud Foundry security middleware</a> is added to the request processing pipeline of your application to enforce that when a request is made of any of the management endpoints, a valid UAA access token is provided as part of that request. Additionally, the security middleware uses the token to determine whether the authenticated user has permissions to access the management endpoint.</p>

					<blockquote>
						<p>NOTE: The Cloud Foundry security middleware is automatically disabled when your application is not running on Cloud Foundry (for example, running locally on your desktop).</p>
					</blockquote>

					<h4 id="1-2-4-1-configure-settings">1.2.4.1 Configure Settings</h4>

					<p>Typically, you need not do any additional configuration. However, the following table describes the additional settings that you could apply to the Cloud Foundry endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the Cloud Foundry endpoint</td>
								<td>“”</td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable Cloud Foundry management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>validateCertificates</td>
								<td>Whether to validate server certificates</td>
								<td>true</td>
							</tr>
							<tr>
								<td>applicationId</td>
								<td>The ID of the application used in permissions check</td>
								<td>VCAP settings</td>
							</tr>
							<tr>
								<td>cloudFoundryApi</td>
								<td>The URL of the Cloud Foundry API</td>
								<td>VCAP settings</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:cloudfoundry</code></strong>.</p>

					<h4 id="1-2-4-2-enable-http-access">1.2.4.2 Enable HTTP Access</h4>

					<p>The default path to the Cloud Foundry endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/cloudfoundryapplication</code>.</p>

					<p>The coding steps you take to enable HTTP access to the endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-4-2-1-asp-net-core-app">1.2.4.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Cloud Foundry actuator to the service container, you can use the <code>AddCloudFoundryActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/CloudFoundry/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Cloud Foundry actuator and security middleware to the ASP.NET Core pipeline, use the <code>UseCloudFoundryActuator()</code> and <code>UseCloudFoundrySecurity()</code> extension methods from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/CloudFoundry/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-4-2-2-asp-net-4-x-app">1.2.4.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Cloud Foundry actuator endpoint, use the <code>UseCloudFoundrySecurity()</code> and <code>UseCloudFoundryActuator()</code> methods from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-4-2-3-asp-net-owin-app">1.2.4.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>
						To add the Cloud Foundry actuator and security middleware to the ASP.NET OWIN pipeline, use the <code>UseCloudFoundryActuator()</code> from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/CloudFoundry/CloudFoundryEndpointAppBuilderExtensions.cs">CloudFoundryEndpointAppBuilderExtensions</a>.
						and <code>UseCloudFoundrySecurityMiddleware()</code> from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/CloudFoundry/CloudFoundrySecurityAppBuilderExtensions.cs">CloudFoundrySecurityAppBuilderExtensions</a>.
					</p>

					<h3 id="1-2-5-health">1.2.5 Health</h3>

					<p>The Steeltoe Health management endpoint can be used to check and return the status of your running application. It can often be used by monitoring software to alert someone if a production system goes down. The information exposed by the <code>health</code> endpoint depends on the <code>management:endpoints:health:showdetails</code> property which can be configured with one of the following values:</p>

					<table>
						<thead>
							<tr>
								<th>Name</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><code>never</code></td>
								<td>Details are never shown.</td>
							</tr>
							<tr>
								<td><code>whenauthorized</code></td>
								<td>Details are only shown to authorized users.</td>
							</tr>
							<tr>
								<td><code>always</code></td>
								<td>Details are always shown.</td>
							</tr>
						</tbody>
					</table>

					<p>The default value is <code>always</code>. Authorized roles can be configured using <code>management:endpoints:health:claim or management:endpoints:health:role</code>. A user is considered to be authorized when they are in the given role or have the specified claim. For example:</p>

<pre><code class="json hljs"><span class="hljs-string">"management"</span>: {
  <span class="hljs-attr">"endpoints"</span>: {
    <span class="hljs-attr">"health"</span>: {
      <span class="hljs-attr">"showdetails"</span>: <span class="hljs-string">"whenauthorized"</span>,
      <span class="hljs-attr">"claim"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"health_actuator"</span>,
        <span class="hljs-attr">"value"</span>: <span class="hljs-string">"see_details"</span>
      }
    }
  }
}
</code></pre>

					<p>Health information is collected from all <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Health/IHealthContributor.cs">IHealthContributor</a> implementations provided to the <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Health/HealthEndpoint.cs">HealthEndpoint</a>. Steeltoe includes several <code>IHealthContributor</code> implementations out of the box that you can use, and, more importantly, you can write your own.</p>

					<p>By default, the final application health state is computed by the <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Health/IHealthAggregator.cs">IHealthAggregator</a> that is provided to the <code>HealthEndpoint</code>. The <code>IHealthAggregator</code> is responsible for sorting out all of the returned statuses from each <code>IHealthContributor</code> and deriving an overall application health state. The <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Health/DefaultHealthAggregator.cs">DefaultHealthAggregator</a> returns the <code>worst</code> status returned from all of the <code>IHealthContributors</code>.</p>

					<h4 id="1-2-5-1-health-contributors">1.2.5.1 Health Contributors</h4>

					<p>At present, Steeltoe provides the following <code>IHealthContributor</code> implementations you can choose from:</p>

					<table>
						<thead>
							<tr>
								<th>Name</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Health/Contributor/DiskSpaceContributor.cs">DiskSpaceContributor</a></td>
								<td>checks for low disk space, configure using <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Health/Contributor/DiskSpaceContributorOptions.cs">DiskSpaceContributorOptions</a></td>
							</tr>
							<tr>
								<td><a target="_blank" href="https://github.com/SteeltoeOSS/Connectors/blob/master/src/Steeltoe.CloudFoundry.ConnectorBase/Queue/RabbitMQHealthContributor.cs">RabbitMQHealthContributor</a></td>
								<td>checks RabbitMQ connection health</td>
							</tr>
							<tr>
								<td><a target="_blank" href="https://github.com/SteeltoeOSS/Connectors/blob/master/src/Steeltoe.CloudFoundry.ConnectorBase/Cache/RedisHealthContributor.cs">RedisHealthContributor</a></td>
								<td>checks Redis cache connection health</td>
							</tr>
							<tr>
								<td><a target="_blank" href="https://github.com/SteeltoeOSS/Connectors/blob/master/src/Steeltoe.CloudFoundry.ConnectorBase/Relational/RelationalHealthContributor.cs">RelationalHealthContributor</a></td>
								<td>checks relational database connection health (MySql, Postgres, SqlServer)</td>
							</tr>
						</tbody>
					</table>

					<p>Many of the above health contributors are located in the <a target="_blank" href="https://github.com/SteeltoeOSS/Connectors">Steeltoe Connectors</a> package and are made available to your application when you reference the Connectors package.</p>

					<p>If you wish to provide custom health information for your application, create a class that implements the <code>IHealthContributor</code> interface and then add that to the <code>HealthEndpoint</code>. Details on how to add a contributor to the endpoint is provided below.</p>

					<p>The following is an example <code>IHealthContributor</code> that always returns a <code>HealthStatus</code> of <code>UP</code>.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomHealthContributor</span> : <span class="hljs-title">IHealthContributor</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Id =&gt; <span class="hljs-string">"CustomHealthContributor"</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> HealthCheckResult <span class="hljs-title">Health</span>(<span class="hljs-params"></span>)
    </span>{
        <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> HealthCheckResult {
            <span class="hljs-comment">// this is used as part of the aggregate, it is not directly part of the middleware response</span>
            Status = HealthStatus.UP,
            Description = <span class="hljs-string">"This health check does not check anything"</span>
        };
        result.Details.Add(<span class="hljs-string">"status"</span>, HealthStatus.UP.ToString());
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>

					<h4 id="1-2-5-2-configure-settings">1.2.5.2 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint.</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the health endpoint</td>
								<td><code>health</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the health management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>sensitive</td>
								<td>Currently not used</td>
								<td>false</td>
							</tr>
							<tr>
								<td>requiredPermissions</td>
								<td>The user permissions required on Cloud Foundry to access endpoint</td>
								<td>RESTRICTED</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:health</code></strong>.</p>

					<h4 id="1-2-5-3-enable-http-access">1.2.5.3 Enable HTTP Access</h4>

					<p>The default path to the Health endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/health</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Health endpoint together with how to use custom Health contributors differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-5-3-1-asp-net-core-app">1.2.5.3.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Health actuator to the service container, use any one of the <code>AddHealthActuator()</code> extension methods from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Health/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Health actuator middleware to the ASP.NET Core pipeline, use the <code>UseHealthActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Health/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<p>The following example shows how enable the Health endpoint and to add a custom <code>IHealthContributor</code> to the service container by adding <code>CustomHealthContributor</code> as a singleton. Once that’s done the Health endpoint will discover and use it during health checks.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    ...
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)
    </span>
    {
        <span class="hljs-comment">// Add your own IHealthContributor, registered with the interface</span>
        services.AddSingleton&lt;IHealthContributor, CustomHealthContributor&gt;();

        <span class="hljs-comment">// Add health actuator</span>
        services.AddHealthActuator(Configuration);

        <span class="hljs-comment">// Add framework services.</span>
        services.AddMvc();
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span>)
    </span>
    {
        app.UseStaticFiles();

        <span class="hljs-comment">// Add management endpoint into pipeline</span>
        app.UseHealthActuator();
    }
}
</code></pre>

					<blockquote>
						<p>NOTE: When you use any of the Steeltoe Connectors in your application we automatically add the corresponding health contributors to the service container.</p>
					</blockquote>

					<h5 id="1-2-5-3-2-asp-net-4-x-app">1.2.5.3.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x application.</p>

					<p>To add the Health actuator endpoint, use the <code>UseHealthActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>. Optionally you can provide a custom <code>IIHealthAggregator</code> and a list of <code>IHealthContributor</code>s should you want to customize the actuator endpoint.  If none are provided, defaults will be provided.</p>

					<p>The following example shows how enable the Health endpoint and use the default <code>IIHealthAggregator</code> together with two <code>IHealthContributor</code>s.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ManagementConfig</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureManagementActuators</span>(<span class="hljs-params">IConfiguration configuration, ILoggerFactory loggerFactory = <span class="hljs-literal">null</span></span>)
    </span>{
        ...
        ActuatorConfigurator.UseHealthActuator(
            configuration,
            <span class="hljs-keyword">new</span> DefaultHealthAggregator(),
            GetHealthContributors(configuration),
            loggerFactory);
        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IEnumerable&lt;IHealthContributor&gt; <span class="hljs-title">GetHealthContributors</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>
    {
        <span class="hljs-keyword">var</span> healthContributors = <span class="hljs-keyword">new</span> List&lt;IHealthContributor&gt;
        {
            <span class="hljs-keyword">new</span> DiskSpaceContributor(),
            RelationalHealthContributor.GetMySqlContributor(configuration)
        };
        <span class="hljs-keyword">return</span> healthContributors;
    }
</code></pre>

					<h5 id="1-2-5-3-3-asp-net-owin-app">1.2.5.3.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Health actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseHealthActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Health/HealthEndpointAppBuilderExtensions.cs">HealthEndpointAppBuilderExtensions</a>.</p>

					<p>The following example shows how enable the Health endpoint and use the default <code>IIHealthAggregator</code> together with two <code>IHealthContributor</code>s.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    ...
					<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configuration</span>(<span class="hljs-params">IAppBuilder app</span>)
    </span>{
        ...
        app.UseHealthActuator(
            <span class="hljs-keyword">new</span> HealthOptions(ApplicationConfig.Configuration),
            <span class="hljs-keyword">new</span> DefaultHealthAggregator(),
            GetHealthContributors(ApplicationConfig.Configuration),
            LoggingConfig.LoggerFactory);
        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IEnumerable&lt;IHealthContributor&gt; <span class="hljs-title">GetHealthContributors</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>
    {
        <span class="hljs-keyword">var</span> healthContributors = <span class="hljs-keyword">new</span> List&lt;IHealthContributor&gt;
            {
                <span class="hljs-keyword">new</span> DiskSpaceContributor(),
                RelationalHealthContributor.GetMySqlContributor(configuration)
            };
        <span class="hljs-keyword">return</span> healthContributors;
    }
}
</code></pre>

					<h3 id="1-2-6-info">1.2.6 Info</h3>

					<p>The Steeltoe <code>Info</code> management endpoint exposes various application information collected from all <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Info/IInfoContributor.cs">IInfoContributor’s</a> provided to the <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Info/InfoEndpoint.cs">InfoEndpoint</a>.</p>

					<p>Steeltoe includes a couple <code>IInfoContributor</code>s out of the box that you can use, but most importantly you can also write your own.</p>

					<h4 id="1-2-6-1-info-contributors">1.2.6.1 Info Contributors</h4>

					<p>The following table describes the <code>IInfoContributor</code> implementations provided by Steeltoe:</p>

					<table>
						<thead>
							<tr>
								<th>Name</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Info/Contributor/AppSettingsInfoContributor.cs">AppSettingsInfoContributor</a></td>
								<td>Exposes any values under the key <code>info</code> (for example, <code>info:foo:bar=foobar</code>) that is in your apps configuration (for example, <code>appsettings.json</code>)</td>
							</tr>
							<tr>
								<td><a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Info/Contributor/GitInfoContributor.cs">GitInfoContributor</a></td>
								<td>Exposes git information (if a git.properties file is available)</td>
							</tr>
						</tbody>
					</table>

					<p>For an example of how to use the above <code>GitInfoContributor</code> within MSBuild using <a target="_blank" href="https://github.com/kzu/GitInfo">GitInfo</a>, see the <a target="_blank" href="https://github.com/SteeltoeOSS/Samples/tree/master/Management/src/AspDotNetCore/CloudFoundry">Steeltoe management sample</a> and the <a target="_blank" href="https://github.com/SteeltoeOSS/Samples/blob/master/Management/src/AspDotNetCore/CloudFoundry/CloudFoundry.csproj">CloudFoundry.csproj</a> file.</p>

					<p>If you wish to provide custom information for your application, create a class that implements the <code>IInfoContributor</code> interface and then add that to the <code>InfoEndpoint</code>. Details on how to add a contributor to the endpoint is provided below.</p>

					<p>The following example <code>IInfoContributor</code> adds <code>someProperty=someValue</code> to the application’s information.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ArbitraryInfoContributor</span> : <span class="hljs-title">IInfoContributor</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Contribute</span>(<span class="hljs-params">IInfoBuilder builder</span>)
    </span>
    {
        <span class="hljs-comment">// pass in the info</span>
        builder.WithInfo(<span class="hljs-string">"arbitraryInfo"</span>, <span class="hljs-keyword">new</span> { someProperty = <span class="hljs-string">"someValue"</span> });
    }
}
</code></pre>

					<blockquote>
						<p>NOTE: Custom <code>IInfoContributor</code> implementations must be retrievable from the DI container by interface in order for Steeltoe to find them.</p>
					</blockquote>

					<h4 id="1-2-6-2-configure-settings">1.2.6.2 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint.</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the info endpoint</td>
								<td><code>info</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable info management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>sensitive</td>
								<td>Currently not used</td>
								<td>false</td>
							</tr>
							<tr>
								<td>requiredPermissions</td>
								<td>User permissions required on Cloud Foundry to access endpoint</td>
								<td>RESTRICTED</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:info</code></strong>.</p>

					<h4 id="1-2-6-3-enable-http-access">1.2.6.3 Enable HTTP Access</h4>

					<p>The default path to the Info endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/info</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Info endpoint together with how to use custom Info contributors differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<blockquote>
						<p>NOTE: If you are using dependency injection, all <code>IInfoContributor</code> implementations that are retrievable from the DI container by interface will be returned in the Info response.</p>
					</blockquote>

					<h5 id="1-2-6-3-1-asp-net-core-app">1.2.6.3.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Info actuator to the service container, you can use any of the <code>AddInfoActuator()</code> extension methods from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Info/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Info actuator middleware to the ASP.NET Core pipeline, use the <code>UseInfoActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Info/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<p>The following example shows how enable the Info endpoint and to add a custom <code>IInfoContributor</code> to the service container by adding <code>ArbitraryInfoContributor</code> as a singleton. Once that’s done the Info endpoint will discover and use it during info requests.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    ...
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)
    </span>
    {
        <span class="hljs-comment">// Add custom info contributor, specifying the interface type</span>
        services.AddSingleton&lt;IInfoContributor, ArbitraryInfoContributor&gt;();

        <span class="hljs-comment">// Add Info actuator</span>
        services.AddInfoActuator(Configuration);

        <span class="hljs-comment">// Add framework services.</span>
        services.AddMvc();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span>)
    </span>{
        app.UseStaticFiles();

        <span class="hljs-comment">// Add management endpoint into pipeline</span>
        app.UseInfoActuator();
    }
}
</code></pre>

					<h5 id="1-2-6-3-2-asp-net-4-x-app">1.2.6.3.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Info actuator endpoint, use the <code>UseInfoActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>. Optionally you can provide a list of <code>IInfoContributor</code>s should you want to customize the actuator endpoint.  If none are provided, defaults will be provided.</p>

					<p>The following example shows how enable the Info endpoint and use the <code>GitInfoContributor</code> and <code>AppSettingsInfoContributor</code> as <code>IInfoContributor</code>s.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ManagementConfig</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureManagementActuators</span>(<span class="hljs-params">IConfiguration configuration, ILoggerFactory loggerFactory</span>)
    </span>
    {
        ...
        ActuatorConfigurator.UseInfoActuator(configuration, GetInfoContributors(configuration), loggerFactory);
        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IEnumerable&lt;IInfoContributor&gt; <span class="hljs-title">GetInfoContributors</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>
    {
        <span class="hljs-keyword">var</span> contributors = <span class="hljs-keyword">new</span> List&lt;IInfoContributor&gt;() { <span class="hljs-keyword">new</span> GitInfoContributor(), <span class="hljs-keyword">new</span> AppSettingsInfoContributor(configuration) }
        <span class="hljs-keyword">return</span> contributors;
    }
</code></pre>

					<h5 id="1-2-6-3-3-asp-net-owin-app">1.2.6.3.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Info actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseInfoActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Info/InfoEndpointAppBuilderExtensions.cs">InfoEndpointAppBuilderExtensions</a>.</p>

					<p>The following example shows how to enable the Info endpoint and use the <code>GitInfoContributor</code> and <code>AppSettingsInfoContributor</code> as <code>IInfoContributor</code>s.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    ...
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configuration</span>(<span class="hljs-params">IAppBuilder app</span>)
    </span>
    {
        ...
        app.UseInfoActuator(
            ApplicationConfig.Configuration,
            GetInfoContributors(ApplicationConfig.Configuration),
            LoggingConfig.LoggerFactory);
        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> IEnumerable&lt;IInfoContributor&gt; <span class="hljs-title">GetInfoContributors</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>
    {
        <span class="hljs-keyword">var</span> contributors = <span class="hljs-keyword">new</span> List&lt;IInfoContributor&gt;() { <span class="hljs-keyword">new</span> GitInfoContributor(), <span class="hljs-keyword">new</span> AppSettingsInfoContributor(configuration) }
        <span class="hljs-keyword">return</span> contributors;
    }
}
</code></pre>

					<h3 id="1-2-7-loggers">1.2.7 Loggers</h3>

					<p>The Steeltoe Loggers management endpoint includes the ability to view and configure the logging levels of your application at runtime when using the <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a>.</p>

					<p>You can view a list of all active loggers in an application and their current configuration. The configuration information is made up of both the explicitly configured logging levels as well as the effective level given to it by the logging framework.</p>

					<h4 id="1-2-7-1-configure-settings">1.2.7.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint.</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the loggers endpoint</td>
								<td><code>loggers</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Enable or disable loggers management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>sensitive</td>
								<td>Currently not used</td>
								<td>false</td>
							</tr>
							<tr>
								<td>requiredPermissions</td>
								<td>User permissions required on Cloud Foundry to access endpoint</td>
								<td>RESTRICTED</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:loggers</code></strong>.</p>

					<h4 id="1-2-7-2-enable-http-access">1.2.7.2 Enable HTTP Access</h4>

					<p>The default path to the Loggers endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/loggers</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Loggers endpoint together with how to use the <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a> differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<blockquote>
						<p>NOTE: The Steeltoe logging provider is a wrapper around the <a target="_blank" href="https://github.com/aspnet/Logging">Microsoft Console Logging</a> provider from Microsoft. This wrapper allows querying defined loggers and modifying the levels dynamically at runtime. For more information, see the <a href="https://steeltoe.io/docs/steeltoe-logging">Steeltoe Logging documentation</a>.</p>
					</blockquote>

					<h5 id="1-2-7-2-1-asp-net-core-app">1.2.7.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Loggers actuator to the service container, use the <code>AddLoggersActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Loggers/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Loggers actuator middleware to the ASP.NET Core pipeline, use the <code>UseLoggersActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Loggers/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<p>To add the <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a> to the <code>ILoggerFactory</code>, use the <code>AddDynamicConsole()</code> extension method and update the <code>Program.cs</code> class as shown below:</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">using</span> Steeltoe.Extensions.Logging;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)
    </span>
    {
        <span class="hljs-keyword">var</span> host = <span class="hljs-keyword">new</span> WebHostBuilder()
            .UseKestrel()
            .UseContentRoot(Directory.GetCurrentDirectory())
            .UseStartup&lt;Startup&gt;()
            .ConfigureAppConfiguration((builderContext, config) =&gt;
            {
                config.SetBasePath(builderContext.HostingEnvironment.ContentRootPath)
                    .AddJsonFile(<span class="hljs-string">"appsettings.json"</span>, optional: <span class="hljs-literal">false</span>, reloadOnChange: <span class="hljs-literal">true</span>)
                    .AddJsonFile(<span class="hljs-string">$"appsettings.<span class="hljs-subst">{builderContext.HostingEnvironment.EnvironmentName}</span>.json"</span>, optional: <span class="hljs-literal">true</span>)
                    .AddEnvironmentVariables();
            })
            .ConfigureLogging((builderContext, loggingBuilder) =&gt;
            {
                loggingBuilder.AddConfiguration(builderContext.Configuration.GetSection(<span class="hljs-string">"Logging"</span>));

                <span class="hljs-comment">// Add Steeltoe dynamic console logger</span>
                loggingBuilder.AddDynamicConsole();
            })
            .Build();

        host.Run();
    }
}
</code></pre>

					<h5 id="1-2-7-2-2-asp-net-4-x-app">1.2.7.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Loggers actuator endpoint, use the <code>UseLoggerActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<p>The following example shows how enable the Loggers endpoint and configure it with the <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a>.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ManagementConfig</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureManagementActuators</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>{
        ...
        ActuatorConfigurator.UseLoggerActuator(configuration, LoggingConfig.LoggerProvider, LoggingConfig.LoggerProvider);
        ...
    }
</code></pre>

					<p>Below is an example of how you can create a <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a> in an 4.x application.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LoggingConfig</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ILoggerFactory LoggerFactory { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ILoggerProvider LoggerProvider { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>{
        LoggerProvider = <span class="hljs-keyword">new</span> DynamicLoggerProvider(<span class="hljs-keyword">new</span> ConsoleLoggerSettings().FromConfiguration(configuration));
        LoggerFactory = <span class="hljs-keyword">new</span> LoggerFactory();
        LoggerFactory.AddProvider(LoggerProvider);
    }
}
</code></pre>

					<h5 id="1-2-7-2-3-asp-net-owin-app">1.2.7.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Loggers actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseLoggersActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Loggers/LoggersEndpointAppBuilderExtensions.cs">LoggersEndpointAppBuilderExtensions</a>.</p>

					<p>The following example shows how enable the Loggers endpoint and configure it with the <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a>.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    ...
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configuration</span>(<span class="hljs-params">IAppBuilder app</span>)
    </span>{
        ...
        app.UseLoggersActuator(
            ApplicationConfig.Configuration,
            LoggingConfig.LoggerProvider,
            LoggingConfig.LoggerFactory);
        ...
    }
}
</code></pre>

					<p>Below is an example of how you can create a <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a> in an 4.x application.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LoggingConfig</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ILoggerFactory LoggerFactory { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ILoggerProvider LoggerProvider { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>{
        LoggerProvider = <span class="hljs-keyword">new</span> DynamicLoggerProvider(<span class="hljs-keyword">new</span> ConsoleLoggerSettings().FromConfiguration(configuration));
        LoggerFactory = <span class="hljs-keyword">new</span> LoggerFactory();
        LoggerFactory.AddProvider(LoggerProvider);
    }
}
</code></pre>

					<h4 id="1-2-7-3-interacting-with-the-loggers-actuator">1.2.7.3 Interacting with the Loggers Actuator</h4>

					<p>To retrieve the loggers that can be configured and the log levels that are allowed, send an HTTP GET request to <code>/{LoggersActuatorPath}</code>.</p>

					<p>Log levels can be changed at namespace or class levels with an HTTP POST request to <code>/{LoggersActuatorPath}/{NamespaceOrClassName}</code> and a JSON request body that defines the minimum level you wish to log:</p>

<pre><code class="json hljs">{
    <span class="hljs-attr">"configuredLevel"</span>:<span class="hljs-string">"INFO"</span>
}
</code></pre>

					<blockquote>
						<p>NOTE: The Pivotal Apps Manager integration involves sending the fully-qualified logger name over HTTP. Avoid using colons in the name of a logger to prevent invalid HTTP Requests.</p>
					</blockquote>

					<h3 id="1-2-8-tracing">1.2.8 Tracing</h3>

					<p>The Steeltoe Tracing endpoint provides the ability to view the last several requests made of your application.</p>

					<p>When you activate the Tracing endpoint, an <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Trace/ITraceRepository.cs">ITraceRepository</a> implementation is configured and created to hold <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Trace/Trace.cs">Trace</a> information that can be retrieved using the endpoint.</p>

					<h4 id="1-2-8-1-configure-settings">1.2.8.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the trace endpoint</td>
								<td><code>trace</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Enable or disable trace management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>sensitive</td>
								<td>Currently not used</td>
								<td>false</td>
							</tr>
							<tr>
								<td>requiredPermissions</td>
								<td>User permissions required on Cloud Foundry to access endpoint</td>
								<td>RESTRICTED</td>
							</tr>
							<tr>
								<td>capacity</td>
								<td>Size of the circular buffer of traces</td>
								<td>100</td>
							</tr>
							<tr>
								<td>addRequestHeaders</td>
								<td>Add request headers</td>
								<td>true</td>
							</tr>
							<tr>
								<td>addResponseHeaders</td>
								<td>Add response headers</td>
								<td>true</td>
							</tr>
							<tr>
								<td>addPathInfo</td>
								<td>Add path information</td>
								<td>false</td>
							</tr>
							<tr>
								<td>addUserPrincipal</td>
								<td>Add user principal</td>
								<td>false</td>
							</tr>
							<tr>
								<td>addParameters</td>
								<td>Add request parameters</td>
								<td>false</td>
							</tr>
							<tr>
								<td>addQueryString</td>
								<td>Add query string</td>
								<td>false</td>
							</tr>
							<tr>
								<td>addAuthType</td>
								<td>Add authentication type</td>
								<td>false</td>
							</tr>
							<tr>
								<td>addRemoteAddress</td>
								<td>Add remote address of user</td>
								<td>false</td>
							</tr>
							<tr>
								<td>addSessionId</td>
								<td>Add session id</td>
								<td>false</td>
							</tr>
							<tr>
								<td>addTimeTaken</td>
								<td>Add time take</td>
								<td>true</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:trace</code></strong>.</p>

					<h4 id="1-2-8-2-enable-http-access">1.2.8.2 Enable HTTP Access</h4>

					<p>The default path to the Trace endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/trace</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Trace endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-8-2-1-asp-net-core-app">1.2.8.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Trace actuator to the service container, use the <code>AddTraceActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Trace/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Trace actuator middleware to the ASP.NET Core pipeline, use the <code>UseTraceActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Trace/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-8-2-2-asp-net-4-x-app">1.2.8.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Trace actuator endpoint, use the <code>UseTraceActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-8-2-3-asp-net-owin-app">1.2.8.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Trace actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseTraceActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Trace/TraceEndpointAppBuilderExtensions.cs">TraceEndpointAppBuilderExtensions</a>.</p>

					<h3 id="1-2-9-thread-dump">1.2.9 Thread Dump</h3>

					<p>The Steeltoe Thread dump endpoint can be used to generate a snapshot of information about all the threads in your application. That snapshot includes several bits of information for each thread, including the thread’s state, a stack trace, any monitor locks held by the thread, any monitor locks the thread is waiting on, and other details.</p>

					<blockquote>
						<p>NOTE: At this time, thread dumps are only possible on the Windows operating system. When integrating with the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-0/console/index.html">Pivotal Apps Manager</a>, you will not have the ability to obtain thread dumps from apps running on Linux cells.</p>
					</blockquote>

					<h4 id="1-2-9-1-configure-settings">1.2.9.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the thread dump endpoint</td>
								<td><code>dump</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the thread dump management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>sensitive</td>
								<td>Currently not used</td>
								<td>false</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:dump</code></strong>.</p>

					<h4 id="1-2-9-2-enable-http-access">1.2.9.2 Enable HTTP Access</h4>

					<p>The default path to the Thread Dump endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/dump</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Thread Dump endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-9-2-1-asp-net-core-app">1.2.9.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Thread dump actuator to the service container, use the <code>AddThreadDumpActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/ThreadDump/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Thread dump actuator middleware to the ASP.NET Core pipeline, use the <code>UseThreadDumpActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/ThreadDump/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-9-2-2-asp-net-4-x-app">1.2.9.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Thread Dump actuator endpoint, use the <code>UseThreadDumpActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-9-2-3-asp-net-owin-app">1.2.9.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Thread Dump actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseThreadDumpActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/ThreadDump/ThreadDumpEndpointAppBuilderExtensions.cs">ThreadDumpEndpointAppBuilderExtensions</a>.</p>

					<h3 id="1-2-10-heap-dump">1.2.10 Heap Dump</h3>

					<p>The Steeltoe Heap dump endpoint can be used to generate and download a mini-dump of your application. The mini-dump can then be read into Visual Studio for analysis.</p>

					<blockquote>
						<p>NOTE: At this time, dumps are only possible on the Windows operating system. When integrating with the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-0/console/index.html">Pivotal Apps Manager</a>, you will not have the ability to obtain dumps from apps running on Linux cells. Also, the heap dump filename used by the Pivotal Apps Manager ends with the <code>.hprof</code> extension instead of the usual <code>.dmp</code> extension. This may cause problems when opening the dump with Visual Studio or some other diagnostic tool. As a workaround, you can rename the file to use the <code>.dmp</code> extension.</p>
					</blockquote>

					<h4 id="1-2-10-1-configure-settings">1.2.10.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the heap dump endpoint</td>
								<td><code>heapdump</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the heap dump management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>sensitive</td>
								<td>Currently not used</td>
								<td>false</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:heapdump</code></strong>.</p>

					<h4 id="1-2-10-2-enable-http-access">1.2.10.2 Enable HTTP Access</h4>

					<p>The default path to the Heap Dump endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/heapdump</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Heap Dump endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-10-2-1-asp-net-core-app">1.2.10.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Heap dump actuator to the service container, use the <code>AddHeapDumpActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/HeapDump/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Heap dump actuator middleware to the ASP.NET Core pipeline, use the <code>UseHeapDumpActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/HeapDump/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-10-2-2-asp-net-4-x-app">1.2.10.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Heap Dump actuator endpoint, use the <code>UseHeapDumpActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-10-2-3-asp-net-owin-app">1.2.10.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Heap Dump actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseHeapDumpActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/HeapDump/HeapDumpEndpointAppBuilderExtensions.cs">HeapDumpEndpointAppBuilderExtensions</a>.</p>

					<h3 id="1-2-11-env">1.2.11 Env</h3>

					<p>The Steeltoe Env endpoint can be used to query and return the configuration values and keys currently in use in your application. The endpoint returns the keys and values from the applications <code>IConfiguration</code>.</p>

					<h4 id="1-2-11-1-configure-settings">1.2.11.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the env endpoint</td>
								<td><code>env</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the env management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>keysToSanitize</td>
								<td>Keys that should be sanitized. Keys can be simple strings that the property ends with or regex expressions</td>
								<td><code>["password", "secret", "key", "token", ".*credentials.*", "vcap_services"]</code></td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:env</code></strong>.</p>

					<h4 id="1-2-11-2-enable-http-access">1.2.11.2 Enable HTTP Access</h4>

					<p>The default path to the Env endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/env</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Env endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-11-2-1-asp-net-core-app">1.2.11.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Env actuator to the service container, use the <code>AddEnvActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Env/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Env actuator middleware to the ASP.NET Core pipeline, use the <code>UseEnvActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Env/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-11-2-2-asp-net-4-x-app">1.2.11.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Env actuator endpoint, use the <code>UseEnvActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-11-2-3-asp-net-owin-app">1.2.11.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Env actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseEnvActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Env/EnvEndpointAppBuilderExtensions.cs">EnvEndpointAppBuilderExtensions</a>.</p>

					<h3 id="1-2-12-refresh">1.2.12 Refresh</h3>

					<p>The Steeltoe Refresh endpoint can be used to cause the applications configuration to be reloaded and return the new values and keys currently in use in your application. The endpoint reloads the configuration using the applications <code>IConfigurationRoot</code>.</p>

					<h4 id="1-2-12-1-configure-settings">1.2.12.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the refresh endpoint</td>
								<td><code>refresh</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the refresh management endpoint</td>
								<td>true</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:refresh</code></strong>.</p>

					<h4 id="1-2-12-2-enable-http-access">1.2.12.2 Enable HTTP Access</h4>

					<p>The default path to the Refresh endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/refresh</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Refresh endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-12-2-1-asp-net-core-app">1.2.12.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Refresh actuator to the service container, use the <code>AddRefreshActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Refresh/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Refresh actuator middleware to the ASP.NET Core pipeline, use the <code>UseRefreshActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Refresh/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-12-2-2-asp-net-4-x-app">1.2.12.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Refresh actuator endpoint, use the <code>UseRefreshActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-12-2-3-asp-net-owin-app">1.2.12.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Refresh actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseRefreshActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Refresh/RefreshEndpointAppBuilderExtensions.cs">RefreshEndpointAppBuilderExtensions</a>.</p>

					<h3 id="1-2-13-mappings">1.2.13 Mappings</h3>

					<p>The Steeltoe Mappings endpoint can be used to return the MVC and WebAPI Routes and Route templates used by the application.</p>

					<h4 id="1-2-13-1-configure-settings">1.2.13.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the mappings endpoint</td>
								<td><code>mappings</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the mappings management endpoint</td>
								<td>true</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:mappings</code></strong>.</p>

					<h4 id="1-2-13-2-enable-http-access">1.2.13.2 Enable HTTP Access</h4>

					<p>The default path to the Mappings endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/mappings</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Mappings endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-13-2-1-asp-net-core-app">1.2.13.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Mappings actuator to the service container, use the <code>AddMappingsActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Mappings/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Mappings actuator middleware to the ASP.NET Core pipeline, use the <code>UseMappingsActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Mappings/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-13-2-2-asp-net-4-x-app">1.2.13.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Mappings actuator endpoint, use the <code>UseMappingsActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<p>By default, the endpoint will return the Routes and Route templates from the apps global <code>RouteTable</code>.  If you wish to expose WebAPI routes, in addition to those from the <code>RouteTable</code>, provide a reference to the <code>IApiExplorer</code> obtained from <code>GlobalConfiguration.Configuration.Services.GetApiExplorer()</code>.</p>

					<h5 id="1-2-13-2-3-asp-net-owin-app">1.2.13.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Mappings actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseMappingsActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Mappings/MappingsEndpointAppBuilderExtensions.cs">MappingsEndpointAppBuilderExtensions</a>.</p>

					<p>You must provide a reference to the <code>IApiExplorer</code> obtained from <code>GlobalConfiguration.Configuration.Services.GetApiExplorer()</code> when using this endpoint in a OWIN based app.</p>

					<h3 id="1-2-14-metrics">1.2.14 Metrics</h3>

					<p>The Steeltoe Metrics endpoint configures application metrics collection using the open source <a target="_blank" href="https://opencensus.io/">OpenCensus</a> project. It automatically configures built-in instrumentation of various aspects of the application and exposes the collected metrics via the endpoint.</p>

					<p>The following instrumentation is automatically configured:</p>

					<ul>
						<li>
							CLR Metrics

							<ul>
								<li>Heap memory, Garbage collections, Thread utilization</li>
							</ul>
						</li>
						<li>
							HTTP Client Metrics

							<ul>
								<li>Request timings &amp; counts</li>
							</ul>
						</li>
						<li>
							HTTP Server Metrics

							<ul>
								<li>Request timings &amp; counts</li>
							</ul>
						</li>
					</ul>

					<p>All of the above metrics are tagged with values specific to the requests being processed; thereby giving multi-dimensional views of the collected metrics.</p>

					<blockquote>
						<p>NOTE: The OpenCensus implementation used in Steeltoe (for example, <code>Steeltoe.Management.OpenCensus</code>) has been contributed to the OpenCensus community. At some point in the near future the metrics collection functionality will move to using it, instead of the Steeltoe version.</p>
					</blockquote>

					<h4 id="1-2-14-1-configure-settings">1.2.14.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the endpoint:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>id</td>
								<td>The ID of the metrics endpoint</td>
								<td><code>metrics</code></td>
							</tr>
							<tr>
								<td>enabled</td>
								<td>Whether to enable the metrics management endpoint</td>
								<td>true</td>
							</tr>
							<tr>
								<td>ingressIgnorePattern</td>
								<td>Regex pattern describing what incoming requests to ignore</td>
								<td>See <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Metrics/MetricsOptions.cs">MetricsOptions</a></td>
							</tr>
							<tr>
								<td>egressIgnorePattern</td>
								<td>Regex pattern describing what outgoing requests to ignore</td>
								<td>See <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointBase/Metrics/MetricsOptions.cs">MetricsOptions</a></td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>Each setting above must be prefixed with <code>management:endpoints:metrics</code></strong>.</p>

					<h4 id="1-2-14-2-enable-http-access">1.2.14.2 Enable HTTP Access</h4>

					<p>The default path to the Metrics endpoint is computed by combining the global <code>path</code> prefix setting together with the <code>id</code> setting from above. The default path is <code>/metrics</code>.</p>

					<p>The coding steps you take to enable HTTP access to the Metrics endpoint differs depending on the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the supported application types.</p>

					<h5 id="1-2-14-2-1-asp-net-core-app">1.2.14.2.1 ASP.NET Core App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-core">HTTP Access ASP.NET Core</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET Core application.</p>

					<p>To add the Metrics actuator to the service container, use the <code>AddMetricsActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Metrics/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</p>

					<p>To add the Mappings actuator middleware to the ASP.NET Core pipeline, use the <code>UseMetricsActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointCore/Metrics/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</p>

					<h5 id="1-2-14-2-2-asp-net-4-x-app">1.2.14.2.2 ASP.NET 4.x App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</a> section below to see the overall steps required to enable HTTP access to endpoints in a 4.x application.</p>

					<p>To add the Metrics actuator endpoint, use the <code>UseMetricsActuator()</code> method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointWeb/ActuatorConfigurator.cs">ActuatorConfigurator</a>.</p>

					<h5 id="1-2-14-2-3-asp-net-owin-app">1.2.14.2.3 ASP.NET OWIN App</h5>

					<p>Refer to the <a href="https://steeltoe.io/docs/steeltoe-management/#http-access-asp-net-owin">HTTP Access ASP.NET OWIN</a> section below to see the overall steps required to enable HTTP access to endpoints in an ASP.NET 4.x OWIN application.</p>

					<p>To add the Metrics actuator middleware to the ASP.NET OWIN pipeline, use the <code>UseMetricsActuator()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.EndpointOwin/Metrics/MappingsEndpointAppBuilderExtensions.cs">MetricsEndpointAppBuilderExtensions</a>.</p>

					<h4 id="1-2-14-3-exporting">1.2.14.3 Exporting</h4>

					<p>By default when you enable metrics collection in your application you do <em>NOT</em> automatically enable exporting of those metrics to a backend system.</p>

					<p>The coding steps you take to enable metrics exporting differs depending on what backend system you are targeting and the type of .NET application your are developing.  The sections which follow describe the steps needed for each of the backend systems and supported application types.</p>

					<h5 id="1-2-14-3-1-add-nuget-references">1.2.14.3.1 Add NuGet References</h5>

					<p>To use the metrics exporters, you need to add a reference to the appropriate Steeltoe NuGet based on the type of the application you are building and what Dependency Injector you have chosen, if any.</p>

					<p>The following table describes the available packages:</p>

					<table>
						<thead>
							<tr>
								<th>App Type</th>
								<th>Package</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>All</td>
								<td><code>Steeltoe.Management.ExporterBase</code></td>
								<td>Base functionality, no dependency injection</td>
							</tr>
							<tr>
								<td>ASP.NET Core</td>
								<td><code>Steeltoe.Management.ExporterCore</code></td>
								<td>Includes <code>ExporterBase</code>, adds ASP.NET Core DI</td>
							</tr>
						</tbody>
					</table>

					<p>To add this type of NuGet to your project, add a <code>PackageReference</code> resembling the following:</p>

<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">ItemGroup</span>&gt;</span>
...
    <span class="hljs-tag">&lt;<span class="hljs-name">PackageReference</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"Steeltoe.Management.ExporterCore"</span> <span class="hljs-attr">Version</span>= <span class="hljs-string">"2.1.0"</span>/&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">ItemGroup</span>&gt;</span>
</code></pre>

					<p>or</p>

<pre><code class="powershell hljs css"><span class="hljs-selector-tag">PM</span>&gt;<span class="hljs-selector-tag">Install-Package</span>  <span class="hljs-selector-tag">Steeltoe</span><span class="hljs-selector-class">.Management</span><span class="hljs-selector-class">.ExporterCore</span> <span class="hljs-selector-tag">-Version</span> 2<span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.0</span>
</code></pre>

					<h5 id="1-2-14-3-2-cloud-foundry-forwarder">1.2.14.3.2 Cloud Foundry Forwarder</h5>

					<p>The <a target="_blank" href="https://docs.pivotal.io/metrics-forwarder/">Metrics Forwarder for Pivotal Cloud Foundry (PCF)</a> is a service that allows apps to emit metrics to the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-2/loggregator/architecture.html">Loggregator</a> system and consume those metrics from the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-2/loggregator/architecture.html#firehose">Loggregator Firehose</a>.</p>

					<p>You can interact with the service through the Cloud Foundry Command Line Interface (cf CLI), <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-0/console/manage-apps.html">Pivotal Apps Manager</a>, and an <a target="_blank" href="https://docs.pivotal.io/metrics-forwarder/api/">HTTP API</a>. See the <a target="_blank" href="https://docs.pivotal.io/metrics-forwarder/using.html">documentation</a> for details on how to use the service in your application.</p>

					<p><a target="_blank" href="https://docs.pivotal.io/metrics-forwarder/">Metrics Forwarder for Pivotal Cloud Foundry (PCF)</a>  enables users to do the following:</p>

					<ul>
						<li>Configure apps to emit custom metrics to <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-2/loggregator/architecture.html">Loggregator</a> system.</li>
						<li>Read custom metrics from the <a target="_blank" href="https://docs.pivotal.io/pivotalcf/2-2/loggregator/architecture.html#firehose">Loggregator Firehose</a> using a Firehose consumer of their choice, including <a target="_blank" href="https://github.com/cloudfoundry/loggregator-release/blob/develop/docs/community-nozzles.md">community</a> and third-party nozzles.</li>
					</ul>

					<p>There are many third-party products you can choose from, including <a target="_blank" href="https://docs.pivotal.io/pcf-metrics/1-4/">PCF Metrics</a>.</p>

					<h5 id="1-2-14-3-2-1-configure-settings">1.2.14.3.2.1 Configure Settings</h5>

					<p>The following table describes the settings that you can apply to the exporter:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>endpoint</td>
								<td>the uri used to POST metrics</td>
								<td>null</td>
							</tr>
							<tr>
								<td>accessToken</td>
								<td>the authentication token needed to access the endpoint</td>
								<td>null</td>
							</tr>
							<tr>
								<td>rateMilli</td>
								<td>delay in milliseconds between metrics POSTs</td>
								<td>60000</td>
							</tr>
							<tr>
								<td>validateCertificates</td>
								<td>validate SSL certificates received from exporter service</td>
								<td>true</td>
							</tr>
							<tr>
								<td>timeoutSeconds</td>
								<td>timeout used in seconds for each POST request</td>
								<td>3</td>
							</tr>
							<tr>
								<td>applicationId</td>
								<td>cloud foundry application ID the POST applies to</td>
								<td>null</td>
							</tr>
							<tr>
								<td>instanceId</td>
								<td>cloud foundry application instance ID the POST applies to</td>
								<td>null</td>
							</tr>
							<tr>
								<td>instanceIndex</td>
								<td>cloud foundry application instance index the POST applies to</td>
								<td>null</td>
							</tr>
							<tr>
								<td>micrometerMetricWriter</td>
								<td>emit metrics using Spring Boot 2.x format</td>
								<td>false</td>
							</tr>
						</tbody>
					</table>

					<p><strong>Note</strong>: <strong>The <code>endpoint</code>, <code>accessToken</code>,<code>applicationId</code>, <code>instanceId</code> and <code>instanceIndex</code> settings above will be automatically picked up from the Metrics Forwarder service binding found for your application.</strong></p>

					<h5 id="1-2-14-3-2-2-asp-net-core-app">1.2.14.3.2.2 ASP.NET Core App</h5>

					<p>There are three steps needed to use the Metrics Forwarder for Pivotal Cloud Foundry (PCF) service:</p>

					<ol>
						<li>Create and bind a forwarder service to your application. Follow the steps in the Metrics Forwarder for PCF <a target="_blank" href="https://docs.pivotal.io/metrics-forwarder/using.html">documentation</a>.</li>
						<li>Add the exporter to the service container. Use the <code>AddMetricsForwarderExporter()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.ExporterCore/Metrics/CloudFoundryForwarder/EndpointServiceCollectionExtensions.cs">EndpointServiceCollectionExtensions</a>.</li>
						<li>Start the exporter background thread. Use the <code>UseMetricsExporter()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.ExporterCore/Metrics/CloudFoundryForwarder/EndpointApplicationBuilderExtensions.cs">EndpointApplicationBuilderExtensions</a>.</li>
					</ol>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
					<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Startup</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>{
        Configuration = configuration;
    }
					<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)
    </span>{
					<span class="hljs-comment">// Add Metrics collection</span>
        services.AddMetricsActuator(Configuration);

					<span class="hljs-comment">// Export metrics to Cloud Foundry forwarder</span>
        services.AddMetricsForwarderExporter(Configuration);
        ...
    }
					<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app</span>)
    </span>{
        app.UseStaticFiles();

					<span class="hljs-comment">// Expose Metrics endpoint</span>
        app.UseMetricsActuator();

        app.UseMvc();

					<span class="hljs-comment">// Start up metrics exporter</span>
        app.UseMetricsExporter();
    }
}
</code></pre>

					<h5 id="1-2-14-3-2-3-asp-net-4-x-app">1.2.14.3.2.3 ASP.NET 4.x App</h5>

					<p>There are two steps needed to use the Metrics Forwarder for Pivotal Cloud Foundry (PCF) service:</p>

					<ol>
						<li>Create and bind a forwarder service to your application. Follow the steps in the Metrics Forwarder for PCF <a target="_blank" href="https://docs.pivotal.io/metrics-forwarder/using.html">documentation</a>.</li>
						<li>Configure and start the exporter background thread.</li>
					</ol>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ManagementConfig</span>
{
					<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IMetricsExporter MetricsExporter { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

					<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UseCloudFoundryMetricsExporter</span>(<span class="hljs-params">IConfiguration configuration, ILoggerFactory loggerFactory = <span class="hljs-literal">null</span></span>)
    </span>{
					<span class="hljs-keyword">var</span> options = <span class="hljs-keyword">new</span> CloudFoundryForwarderOptions(configuration);
        MetricsExporter = <span class="hljs-keyword">new</span> CloudFoundryForwarderExporter(
            options,
            OpenCensusStats.Instance,
            loggerFactory != <span class="hljs-literal">null</span> ? loggerFactory.CreateLogger&lt;CloudFoundryForwarderExporter&gt;() : <span class="hljs-literal">null</span>);
    }
					<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)
    </span>{
        DiagnosticsManager.Instance.Start();
					<span class="hljs-keyword">if</span> (MetricsExporter != <span class="hljs-literal">null</span>)
        {
            MetricsExporter.Start();
        }
    }
					<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Stop</span>(<span class="hljs-params"></span>)
    </span>{
        DiagnosticsManager.Instance.Stop();
					<span class="hljs-keyword">if</span> (MetricsExporter != <span class="hljs-literal">null</span>)
        {
            MetricsExporter.Stop();
        }
    }
}
</code></pre>

					<h1 id="2-0-distributed-tracing">2.0 Distributed Tracing</h1>

					<p>Steeltoe distributed tracing implements a solution for .NET applications based on the open source <a target="_blank" href="https://opencensus.io/">OpenCensus</a> project. For most users implementing and using distributed tracing should be invisible, and many of the interactions with external systems should be instrumented automatically. You can capture trace data in logs, or by sending it to a remote collector service.</p>

					<blockquote>
						<p>NOTE: The OpenCensus implementation used in Steeltoe (for example, <code>Steeltoe.Management.OpenCensus</code>) has been contributed to the OpenCensus community. At some point in the near future the distributed tracing functionality will move to using it, instead of the Steeltoe version.</p>
					</blockquote>

					<p>A Span is the basic unit of work. For example, sending an RPC is a new span, as is sending a response to an RPC. Span’s are identified by a unique 64-bit ID for the span and another 64-bit ID for the trace the span is a part of. Spans also have other data, such as descriptions, key-value annotations, the ID of the span that caused them, and process ID’s (normally IP address). Spans are started and stopped, and they keep track of their timing information. Once you create a span, you must stop it at some point in the future. A set of spans forming a tree-like structure called a Trace. For example, if you are running a distributed big-data store, a trace might be formed by a put request.</p>

					<p>Features:</p>

					<ul>
						<li>Adds trace and span ids to the application log messages, so you can extract all the logs from a given trace or span in a log aggregator.</li>
						<li>Using the  <a target="_blank" href="https://opencensus.io/">OpenCensus</a> APIs we provide an abstraction over common distributed tracing data models: traces, spans (forming a DAG), annotations, key-value annotations.</li>
						<li>Automatically instruments common ingress and egress points from .NET applications (e.g MVC Controllers, Views, Http clients).</li>
						<li>Optionally generate, collect and export Zipkin-compatible traces via HTTP.</li>
					</ul>

					<blockquote>
						<p>NOTE: Currently, distributed tracing is only supported in ASP.NET Core applications.</p>
					</blockquote>

					<p>You should understand how the .NET <a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration">Configuration service</a> works before starting to use the management endpoints. You need at least a basic understanding of the <code>ConfigurationBuilder</code> and how to add providers to the builder to configure the endpoints.</p>

					<p>When developing ASP.NET Core applications, you should also understand how the ASP.NET Core <a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/startup">Startup</a> class is used in configuring the application services for the app. Pay particular attention to the usage of the <code>ConfigureServices()</code> and <code>Configure()</code> methods.</p>

					<p>Steeltoe distributed tracing automatically applies instrumentation at key ingress and egress points in your ASP.NET Core application so that you are able to get meaningful traces without having to do any instrumentation yourself. These points include:</p>

					<ul>
						<li>
							HTTP Server

							<ul>
								<li>Request Start &amp; Finish</li>
								<li>Unhandled and Handled exceptions</li>
								<li>MVC Action Start &amp; Finish</li>
								<li>MVC View Start &amp; Finish</li>
							</ul>
						</li>
						<li>
							HTTP Client (Desktop and Core)

							<ul>
								<li>Outgoing Request Start &amp; Finish</li>
								<li>Unhandled and Handled exceptions</li>
							</ul>
						</li>
					</ul>

					<h3 id="2-2-1-add-nuget-references">2.2.1 Add NuGet References</h3>

					<p>To use the distributed tracing exporters, you need to add a reference to the appropriate Steeltoe NuGet based on the type of the application you are building and what Dependency Injector you have chosen, if any.</p>

					<p>The following table describes the available packages:</p>

					<table>
						<thead>
							<tr>
								<th>App Type</th>
								<th>Package</th>
								<th>Description</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>All</td>
								<td><code>Steeltoe.Management.TracingBase</code></td>
								<td>Base functionality, no dependency injection</td>
							</tr>
							<tr>
								<td>ASP.NET Core</td>
								<td><code>Steeltoe.Management.TracingCore</code></td>
								<td>Includes <code>TracingBase</code>, adds ASP.NET Core DI</td>
							</tr>
						</tbody>
					</table>

					<p>To add this type of NuGet to your project, add a <code>PackageReference</code> resembling the following:</p>

<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">ItemGroup</span>&gt;</span>
...
    <span class="hljs-tag">&lt;<span class="hljs-name">PackageReference</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"Steeltoe.Management.TracingCore"</span> <span class="hljs-attr">Version</span>= <span class="hljs-string">"2.1.0"</span>/&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">ItemGroup</span>&gt;</span>
</code></pre>

					<p>or</p>

<pre><code class="powershell hljs css"><span class="hljs-selector-tag">PM</span>&gt;<span class="hljs-selector-tag">Install-Package</span>  <span class="hljs-selector-tag">Steeltoe</span><span class="hljs-selector-class">.Management</span><span class="hljs-selector-class">.TracingCore</span> <span class="hljs-selector-tag">-Version</span> 2<span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.0</span>
</code></pre>

					<h3 id="2-2-2-configure-settings">2.2.2 Configure Settings</h3>

					<p>Distributed tracing can be configured by using the normal .NET <a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration">Configuration service</a>.</p>

					<p>All settings should be placed under the prefix with the key <code>management:tracing:</code>.</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>name</td>
								<td>the name of the application</td>
								<td>spring:application:name, Cloud Foundry name, or “Unknown”</td>
							</tr>
							<tr>
								<td>ingressIgnorePattern</td>
								<td>Regex pattern describing what incoming requests to ignore</td>
								<td>See <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.TracingBase/TracingOptions.cs">TracingOptions</a></td>
							</tr>
							<tr>
								<td>egressIgnorePattern</td>
								<td>Regex pattern describing what outgoing requests to ignore</td>
								<td>See <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.TracingBase/TracingOptions.cs">TracingOptions</a></td>
							</tr>
							<tr>
								<td>maxNumberOfAttributes</td>
								<td>max attributes attachable to OpenCensus span</td>
								<td>32</td>
							</tr>
							<tr>
								<td>maxNumberOfAnnotations</td>
								<td>max annotations attachable to OpenCensus span</td>
								<td>32</td>
							</tr>
							<tr>
								<td>maxNumberOfMessageEvents</td>
								<td>max events attachable to OpenCensus span</td>
								<td>128</td>
							</tr>
							<tr>
								<td>maxNumberOfLinks</td>
								<td>max links attachable to OpenCensus span</td>
								<td>128</td>
							</tr>
							<tr>
								<td>alwaysSample</td>
								<td>enable the OpenCensus AlwaysSampler</td>
								<td>OpenCensus ProbabilitySampler</td>
							</tr>
							<tr>
								<td>neverSample</td>
								<td>enable the OpenCensus NeverSampler</td>
								<td>OpenCensus ProbabilitySampler</td>
							</tr>
							<tr>
								<td>useShortTraceIds</td>
								<td>truncate the ids to 8 bytes instead of 16, use for backwards compatibility with Spring Sleuth, PCF Metrics, etc.</td>
								<td>true</td>
							</tr>
						</tbody>
					</table>

					<h3 id="2-2-3-enabling-log-correlation">2.2.3 Enabling Log Correlation</h3>

					<p>If you want to use distributed tracing together with log correlation, then you must utilize the <a target="_blank" href="https://github.com/SteeltoeOSS/Logging">Steeltoe Logging provider</a> in your application.</p>

					<p>Follow these <a href="https://steeltoe.io/docs/steeltoe-logging/#1-0-dynamic-logging-provider">instructions</a> for how to enable the provider in your application.</p>

					<p>Once that is done, then whenever your application issues any log statements, the Steeltoe logger will add additional trace information to each log message if there is an active trace context. The format of that information is of the form:</p>

					<ul>
						<li><code>[app name, trace id, span id, trace flags]</code>  (for example, <code>[service1,2485ec27856c56f4,2485ec27856c56f4,true]</code>)</li>
					</ul>

					<h3 id="2-2-4-propagating-trace-context">2.2.4 Propagating Trace Context</h3>

					<p>When working with distributed tracing systems you will find that a trace context (for example, trace state information) must get propagated to all child processes to ensure that child spans originating from a root trace get collected and correlated into a single trace in the end.  The current trace and span IDs are just one piece of the required information that must get propagated.</p>

					<p>Steeltoe distributed tracing handles this for you by default when using the .NET HttpClient. When a downstream HTTP call is made, the current trace context is encoded as request headers and sent along with the request automatically.  Currently, Steeltoe encodes the context using <a target="_blank" href="https://github.com/openzipkin/b3-propagation">Zipkin B3 Propagation</a> encodings. As a result, you will find that Steeltoe tracing is interoperable with several other instrumentation libraries such as <a target="_blank" href="https://cloud.spring.io/spring-cloud-sleuth/2.0.x/single/spring-cloud-sleuth.html">Spring Cloud Sleuth</a>.</p>

					<h3 id="2-2-5-add-distributed-tracing">2.2.5 Add Distributed Tracing</h3>

					<p>To enable distributed tracing all you need to to do is add the service to the container. To do this use the <code>AddDistributedTracing()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.TracingCore/TracingServiceCollectionExtensions.cs">TracingServiceCollectionExtensions</a>.</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Startup</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>{
        Configuration = configuration;
    }

    <span class="hljs-keyword">public</span> IConfiguration Configuration { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)
    </span>{
        ...
        <span class="hljs-comment">// Add Distributed tracing</span>
        services.AddDistributedTracing(Configuration);

        <span class="hljs-comment">// Add framework services.</span>
        services.AddMvc();
    }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app</span>)
    </span>{
        app.UseStaticFiles();

        app.UseMvc();
    }
}
</code></pre>

					<h2 id="2-3-exporting">2.3 Exporting</h2>

					<p>By default when you enable distributed tracing in your application you do <em>NOT</em> automatically enable exporting of those traces to a backend system. Currently, Steeltoe supports exporting traces to a backend Zipkin server.</p>

					<p>To enable exporting you will need to do the following:</p>

					<ul>
						<li>Add appropriate NuGet package reference to your project.</li>
						<li>Configure the settings the exporter will use during export.</li>
						<li>Add and Use the exporter service in the application</li>
					</ul>

					<h3 id="2-3-1-add-nuget-references">2.3.1 Add NuGet References</h3>

					<p>All of the exporters can be found in the <code>Steeltoe.Management.ExporterBase</code> and in <code>Steeltoe.Management.OpenCensus</code>.</p>

					<p>To use an exporter in a ASP.NET Core application, then add the following <code>PackageReference</code> to your <code>.csproj</code> file.</p>

<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">ItemGroup</span>&gt;</span>
...
    <span class="hljs-tag">&lt;<span class="hljs-name">PackageReference</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"Steeltoe.Management.ExporterCore"</span> <span class="hljs-attr">Version</span>= <span class="hljs-string">"2.1.0"</span>/&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">ItemGroup</span>&gt;</span>
</code></pre>

					<p>or</p>

<pre><code class="powershell hljs css"><span class="hljs-selector-tag">PM</span>&gt;<span class="hljs-selector-tag">Install-Package</span>  <span class="hljs-selector-tag">Steeltoe</span><span class="hljs-selector-class">.Management</span><span class="hljs-selector-class">.ExporterCore</span> <span class="hljs-selector-tag">-Version</span> 2<span class="hljs-selector-class">.1</span><span class="hljs-selector-class">.0</span>
</code></pre>

					<h3 id="2-3-2-zipkin-server">2.3.2 Zipkin Server</h3>

					<p>Zipkin is a popular distributed tracing system which has been around for several years. It is composed of client libraries for instrumenting application code and a backend server for collecting and viewing the collected data. For more information on Zipkin we encourage you to review the <a target="_blank"  href="https://zipkin.io/">documentation</a>.  Check out the <a target="_blank"  href="https://zipkin.io/pages/quickstart">Quickstart</a> guide for details on how to set up a server.</p>

					<p>Steeltoe provides an exporter that will send all captured traces to a Zipkin server.  The following sections outline how to enable the exporter in your application.</p>

					<h4 id="2-3-2-1-configure-settings">2.3.2.1 Configure Settings</h4>

					<p>The following table describes the settings that you can apply to the exporter:</p>

					<table>
						<thead>
							<tr>
								<th>Key</th>
								<th>Description</th>
								<th>Default</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>endpoint</td>
								<td>the uri used to POST traces</td>
								<td><code>http://localhost:9411/api/v2/spans</code></td>
							</tr>
							<tr>
								<td>validateCertificates</td>
								<td>validate SSL certificates received from exporter service</td>
								<td>true</td>
							</tr>
							<tr>
								<td>timeoutSeconds</td>
								<td>timeout used in seconds for each POST request</td>
								<td>3</td>
							</tr>
							<tr>
								<td>serviceName</td>
								<td>app name used in log messages</td>
								<td>null</td>
							</tr>
							<tr>
								<td>useShortTraceIds</td>
								<td>truncate the ids to 8 bytes instead of 16, use for backwards compatibility with Spring Sleuth, PCF Metrics, etc.</td>
								<td>true</td>
							</tr>
						</tbody>
					</table>

					<h4 id="2-3-2-2-add-and-use-zipkin-exporter">2.3.2.2 Add and Use Zipkin Exporter</h4>

					<p>There are two steps needed to use the Zipkin exporter:</p>

					<ol>
						<li>Add the exporter to the service container. Use the <code>AddZipkinExporter()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.ExporterCore/Tracing/Zipkin/ZipkinExporterServiceCollectionExtensions.cs">ZipkinExporterServiceCollectionExtensions</a>.</li>
						<li>Start the exporter background thread. Use the <code>UseTracingExporter()</code> extension method from <a target="_blank" href="https://github.com/SteeltoeOSS/Management/blob/master/src/Steeltoe.Management.ExporterCore/Tracing/Zipkin/ZipkinExporterApplicationBuilderExtensions.cs">ZipkinExporterApplicationBuilderExtensions</a>.</li>
					</ol>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Startup</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>{
        Configuration = configuration;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)
    </span>{
        <span class="hljs-comment">// Add Distributed tracing</span>
        services.AddDistributedTracing(Configuration);

        <span class="hljs-comment">// Export traces to Zipkin</span>
        services.AddZipkinExporter(Configuration);
        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app</span>)
    </span>{
        app.UseStaticFiles();
        app.UseMvc();

        <span class="hljs-comment">// Start up trace exporter</span>
        app.UseTracingExporter();
    }
}
</code></pre>

					<h1 id="3-0-management-tasks">3.0 Management Tasks</h1>

					<p>Steeltoe Management Tasks provide a means of running administrative tasks for ASP.NET Core applications with the same context as the running version of your application. The original use case for this feature is managing database migrations with a bound database service on Cloud Foundry, but the framework is extensible for you to create your own tasks.</p>

					<h2 id="3-1-usage">3.1 Usage</h2>

					<p>This package provides an extension for <code>Microsoft.AspNetCore.Hosting.IWebHost</code>. It is not currently compatible with any form of .NET application besides ASP.NET Core.</p>

					<h3 id="3-1-1-add-nuget-reference">3.1.1 Add NuGet Reference</h3>

					<p>Add the following <code>PackageReference</code> to your <code>.csproj</code> file.</p>

<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">ItemGroup</span>&gt;</span>
...
    <span class="hljs-tag">&lt;<span class="hljs-name">PackageReference</span> <span class="hljs-attr">Include</span>=<span class="hljs-string">"Steeltoe.Management.TaskCore"</span> <span class="hljs-attr">Version</span>= <span class="hljs-string">"2.3.0"</span>/&gt;</span>
...
<span class="hljs-tag">&lt;/<span class="hljs-name">ItemGroup</span>&gt;</span>
</code></pre>

					<p>or</p>

<pre><code class="powershell hljs css"><span class="hljs-selector-tag">PM</span>&gt;<span class="hljs-selector-tag">Install-Package</span>  <span class="hljs-selector-tag">Steeltoe</span><span class="hljs-selector-class">.Management</span><span class="hljs-selector-class">.TaskCore</span> <span class="hljs-selector-tag">-Version</span> 2<span class="hljs-selector-class">.3</span><span class="hljs-selector-class">.0-rc1</span>
</code></pre>

					<h3 id="3-1-2-implement-iapplicationtask">3.1.2 Implement IApplicationTask</h3>

					<p>Management tasks for use with Steeltoe must implement <code>Steeltoe.Common.Tasks.IAppliationTask</code>. Two implementations are currently provided with Steeltoe:</p>

					<ul>
						<li><code>Steeltoe.Management.TaskCore.DelegatingTask</code> - runs an arbitrary <code>Action</code></li>
						<li><code>Steeltoe.CloudFoundry.Connector.EFCore.MigrateDbContextTask&lt;T&gt;</code> - runs DbContext migrations with Entity Framework Core</li>
					</ul>

					<p>The interface is simple:</p>

<pre><code class="csharp hljs"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> A runnable task bundled with the assembly that can be executed on-demand</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IApplicationTask</span>
{
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> Gets globally unique name for the task</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">string</span> Name { <span class="hljs-keyword">get</span>; }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> Action which to run</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Run</span>(<span class="hljs-params"></span>)</span>;
}
</code></pre>

					<h3 id="3-1-3-add-task-to-servicecollection">3.1.3 Add Task to ServiceCollection</h3>

					<p>Several extensions to <code>IServiceCollection</code> have been added to provide options for task registration. Add <code>using Steeltoe.Management.TaskCore</code> to gain access to the following extension signatures:</p>

					<ul>
						<li><code>AddTask&lt;T&gt;(ServiceLifetime lifetime = ServiceLifetime.Singleton)</code></li>
						<li><code>AddTask(IApplicationTask task)</code></li>
						<li><code>AddTask(Func&lt;IServiceProvider, IApplicationTask&gt; factory, ServiceLifetime lifetime = ServiceLifetime.Singleton)</code></li>
						<li><code>AddTask(string name, Action&lt;IServiceProvider&gt; runAction, ServiceLifetime lifetime = ServiceLifetime.Singleton)</code></li>
					</ul>

					<h3 id="3-1-4-apply-extension-method">3.1.4 Apply Extension Method</h3>

					<p>
						Once your task has been defined and added to the service container, the last setup task is to enable a means of accessing the task.
						In your <code>program.cs</code> file, replace the call to <code>&lt;your built IWebHost&gt;.Run()</code> with <code>&lt;your built IWebHost&gt;.RunWithTasks()</code>.
					</p>

					<h3 id="3-1-5-invoke-task">3.1.5 Invoke Task</h3>

					<p>
						Once all the setup steps have been completed, any invocation of your application with a configuration value for the key <code>runtask</code> will run that task (and shut down) instead of following the normal web application flow.
						As a matter of best practice, your are encouraged to only provide that value via command-line parameters, but due to the way .NET Configuration works, it does not matter which configuration provider is used to provide the task name.
						Invoking the command on Cloud Foundry will look similar to this: <code>cf run-task actuator "./CloudFoundry runtask=migrate" --name migrate</code>. Deploy the <a target="_blank" href="https://github.com/SteeltoeOSS/Samples/tree/master/Management/src/AspDotNetCore/CloudFoundry">Steeltoe sample</a> to try this out.
					</p>

					<blockquote>
						<p>NOTE: The command line configuration provider is added by default with <code>IWebHostBuilder.CreateDefaultBuilder</code>. If the task does not fire when running from a command line with <code>runtask=&lt;taskname&gt;</code> verify that it has been added for your application.</p>
					</blockquote>

					<h1 id="common-steps">Common Steps</h1>

					<h2 id="publish-sample">Publish Sample</h2>

					<h3 id="asp-net-core">ASP.NET Core</h3>

					<p>Use the <code>dotnet</code> CLI to <a target="_blank" href="https://docs.microsoft.com/en-us/dotnet/core/tools/dotnet-publish">build and locally publish</a> the application for the framework and runtime you will deploy the application to:</p>

					<ul>
						<li>Linux with .NET Core: <code>dotnet publish -f netcoreapp2.1 -r ubuntu.14.04-x64</code></li>
						<li>Windows with .NET Core: <code>dotnet publish -f netcoreapp2.1 -r win10-x64</code></li>
						<li>Windows with .NET Platform: <code>dotnet publish -f net461 -r win10-x64</code></li>
					</ul>

					<blockquote>
						<p>NOTE: Starting with .NET Core 2.0, the <code>dotnet publish</code> command will automatically restore dependencies for you. Running <code>dotnet restore</code>, explicitly is not generally required.</p>
					</blockquote>

					<h3 id="asp-net-4-x">ASP.NET 4.x</h3>

					<ol>
						<li>Open the solution for the sample in Visual Studio</li>
						<li>Right click on the project, select “Publish”</li>
						<li>Use the included <code>FolderProfile</code> to publish to <code>bin/Debug/net461/win10-x64/publish</code></li>
					</ol>

					<h2 id="push-sample">Push Sample</h2>

					<p>Use the Cloud Foundry CLI to push the published application to Cloud Foundry by using the parameters that match what you selected for framework and runtime, as follows:</p>

<pre><code class="bash hljs"><span class="hljs-comment"># Push to Linux cell</span>
cf push <span class="hljs-_">-f</span> manifest.yml -p bin/Debug/netcoreapp2.1/ubuntu.14.04-x64/publish

    <span class="hljs-comment"># Push to Windows cell, .NET Core</span>
cf push <span class="hljs-_">-f</span> manifest-windows.yml -p bin/Debug/netcoreapp2.1/win10-x64/publish

    <span class="hljs-comment"># Push to Windows cell, .NET Framework</span>
cf push <span class="hljs-_">-f</span> manifest-windows.yml -p bin/Debug/net461/win10-x64/publish
</code></pre>

					<h2 id="http-access-asp-net-core">HTTP Access ASP.NET Core</h2>

					<p>To expose any of the management endpoints over HTTP in an ASP.NET Core application:</p>

					<ol>
						<li>Add a reference to <code>Steeltoe.Management.EndpointCore</code> or <code>Steeltoe.Management.CloudFoundryCore</code>.</li>
						<li>Configure endpoint settings, as needed (for example, <code>appsettings.json</code>).</li>
						<li>Add any additional “contributors” to the service container. (for example, <code>AddSingleton&lt;IHealthContributor, CustomHealthContributor&gt;()</code>)</li>
						<li><code>Add</code> the actuator endpoint to the service container (for example, <code>AddHealthActuator()</code>).</li>
						<li><code>Use</code> the actuator middleware to provide HTTP access (for example, <code>UseInfoActuator()</code>).</li>
					</ol>

					<blockquote>
						<p>NOTE: Each endpoint uses the same host and port as the application. The default path to each endpoint is specified in its section on this page, along with specific <code>Add</code> and <code>Use</code> method names.</p>
					</blockquote>

					<p>If you wish to use all of the Steeltoe endpoints which integrate with the Pivotal Apps Manager, use <code>AddCloudFoundryActuators()</code> and <code>UseCloudFoundryActuators()</code> to add them all at once instead of including each individually, as shown in the following example:</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    <span class="hljs-keyword">public</span> IConfiguration Configuration { <span class="hljs-keyword">get</span>; }
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Startup</span>(<span class="hljs-params">IConfiguration configuration</span>)
    </span>{
        Configuration = configuration;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureServices</span>(<span class="hljs-params">IServiceCollection services</span>)
    </span>{
        ...
        <span class="hljs-comment">// Add all management endpoint services</span>
        services.AddCloudFoundryActuators(Configuration);
        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configure</span>(<span class="hljs-params">IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory</span>)
    </span>{
        ...
        <span class="hljs-comment">// Add all management endpoints into pipeline</span>
        app.UseCloudFoundryActuators();

        <span class="hljs-comment">// Add ASP.NET Core MVC middleware to pipeline</span>
        app.UseMvc();
        ...
    }
}
</code></pre>

					<blockquote>
						<p>NOTE: The order in which you add middleware to the <a target="_blank" href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/?view=aspnetcore-2.1&amp;tabs=aspnetcore2x">ASP.NET Core pipeline</a> is important. We recommend that you add the Steeltoe management endpoints before others to ensure proper operation.</p>
					</blockquote>

					<h2 id="http-access-asp-net-4-x">HTTP Access ASP.NET 4.x</h2>

					<p>To expose any of the management endpoints over HTTP in an ASP.NET 4.x application:</p>

					<ol>
						<li>Add a reference to <code>Steeltoe.Management.EndpointWeb</code>.</li>
						<li>Configure endpoint settings, as needed (for example, <code>appsettings.json</code>).</li>
						<li><code>Use</code> the middleware to provide HTTP access (for example,, <code>UseInfoActuator()</code>).</li>
						<li>If using Metrics, start/stop Diagnostics and MetricsExporting (for example, <code>DiagnosticsManager.Instance.Start()</code>)</li>
						<li>Update web.config to allow extensionless requests to reach the actuators</li>
					</ol>

<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">system.webServer</span>&gt;</span>
					<span class="hljs-tag">&lt;<span class="hljs-name">handlers</span>&gt;</span>
					<span class="hljs-comment">&lt;!--  This example is overly broad, it does not need to be used exactly as-is  --&gt;</span>
					<span class="hljs-comment">&lt;!-- Allow at least GET, POST and OPTIONS requests to go past IIS to actuators --&gt;</span>
					<span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ExtensionlessUrlHandler-Integrated-4.0"</span>
					<span class="hljs-attr">path</span>=<span class="hljs-string">"*."</span>
					<span class="hljs-attr">verb</span>=<span class="hljs-string">"*"</span>
					<span class="hljs-attr">type</span>=<span class="hljs-string">"System.Web.Handlers.TransferRequestHandler"</span>
					<span class="hljs-attr">preCondition</span>=<span class="hljs-string">"integratedMode,runtimeVersionv4.0"</span> /&gt;</span>
					<span class="hljs-tag">&lt;/<span class="hljs-name">handlers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">system.webServer</span>&gt;</span>
</code></pre>

					<blockquote>
						<p>NOTE: Each endpoint uses the same host and port as the application. The default path to each endpoint is specified in its section on this page, along with specific <code>Use</code> method name.</p>
					</blockquote>

					<p>If you wish to use all of the Steeltoe endpoints which integrate with the Pivotal Apps Manager, call <code>UseCloudFoundryActuators()</code> to configure them all at once instead of including each individually, as shown in the following example:</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ManagementConfig</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IMetricsExporter MetricsExporter { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureActuators</span>(<span class="hljs-params">
        IConfiguration config,
        ILoggerProvider logger,
         IEnumerable&lt;IHealthContributor&gt; contrib,
         IApiExplorer api,
         ILoggerFactory factory = <span class="hljs-literal">null</span></span>)
    </span>{
        ActuatorConfigurator.UseCloudFoundryActuators(config, logger, contrib, api, factory);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)
    </span>{
        DiagnosticsManager.Instance.Start();
        <span class="hljs-keyword">if</span> (MetricsExporter != <span class="hljs-literal">null</span>)
        {
            MetricsExporter.Start();
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Stop</span>(<span class="hljs-params"></span>)
    </span>{
        DiagnosticsManager.Instance.Stop();
        <span class="hljs-keyword">if</span> (MetricsExporter != <span class="hljs-literal">null</span>)
        {
            MetricsExporter.Stop();
        }
    }
}
</code></pre>

					<p>The above static methods should be called in <code>Global.asax.cs</code>.  In the <code>Application_Start()</code> method call <code>ConfigureActuators()</code>and <code>Start()</code> and in <code>Application_Stop()</code> call <code>Stop()</code>.  See the <a target="_blank" href="https://github.com/SteeltoeOSS/Samples/tree/dev/Management/src/AspDotNet4">Steeltoe Samples repository</a> for more details.</p>

					<h2 id="http-access-asp-net-owin">HTTP Access ASP.NET OWIN</h2>

					<p>To expose any of the management endpoints over HTTP in an ASP.NET 4.x application:</p>

					<ol>
						<li>Add a reference to <code>Steeltoe.Management.EndpointOwin</code>.</li>
						<li>Configure endpoint settings, as needed (for example, <code>appsettings.json</code>).</li>
						<li><code>Use</code> the middleware to provide HTTP access (for example, <code>UseInfoActuator()</code>).</li>
						<li>If using Metrics, start/stop Diagnostics and MetricsExporting (for example, <code>DiagnosticsManager.Instance.Start()</code>)</li>
						<li>If not self-hosting, add/update web.config entries to ensure OWIN startup and allow requests to reach the actuators</li>
					</ol>

<pre><code class="xml hljs">    <span class="hljs-tag">&lt;<span class="hljs-name">appSettings</span>&gt;</span>
					<span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"owin:AutomaticAppStartup"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span> /&gt;</span>
					<span class="hljs-tag">&lt;/<span class="hljs-name">appSettings</span>&gt;</span>
					<span class="hljs-tag">&lt;<span class="hljs-name">system.webServer</span>&gt;</span>
					<span class="hljs-tag">&lt;<span class="hljs-name">handlers</span>&gt;</span>
					<span class="hljs-comment">&lt;!-- Allow GET, POST and OPTIONS requests to go past IIS to actuators --&gt;</span>
					<span class="hljs-comment">&lt;!-- Adjust the path value if you are not using Pivotal Apps Manager --&gt;</span>
					<span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ApiURIs-ISAPI-Integrated-4.0"</span>
					<span class="hljs-attr">path</span>=<span class="hljs-string">"cloudfoundryapplication/*"</span>
					<span class="hljs-attr">verb</span>=<span class="hljs-string">"GET,POST,OPTIONS"</span>
					<span class="hljs-attr">type</span>=<span class="hljs-string">"System.Web.Handlers.TransferRequestHandler"</span>
					<span class="hljs-attr">preCondition</span>=<span class="hljs-string">"integratedMode,runtimeVersionv4.0"</span> /&gt;</span>
					<span class="hljs-tag">&lt;/<span class="hljs-name">handlers</span>&gt;</span>
					<span class="hljs-tag">&lt;/<span class="hljs-name">system.webServer</span>&gt;</span>
</code></pre>

					<blockquote>
						<p>NOTE: Each endpoint uses the same host and port as the application. The default path to each endpoint is specified in its section on this page, along with specific <code>Use</code> method name.</p>
					</blockquote>

					<p>If you wish to use all of the Steeltoe endpoints which integrate with the Pivotal Apps Manager, use <code>UseCloudFoundryActuators()</code> to configure them all at once instead of including each individually, as shown in the following example:</p>

<pre><code class="csharp hljs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Startup</span>
{
    <span class="hljs-keyword">private</span> IMetricsExporter MetricsExporter { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Configuration</span>(<span class="hljs-params">IAppBuilder app</span>)
    </span>{
        <span class="hljs-keyword">var</span> config = GlobalConfiguration.Configuration;

        app.UseCloudFoundryActuators(
            ApplicationConfig.Configuration,
            GetHealthContributors(ApplicationConfig.Configuration),
            config.Services.GetApiExplorer(),
            LoggingConfig.LoggerProvider,
            LoggingConfig.LoggerFactory);

        Start();
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)
    </span>{
        DiagnosticsManager.Instance.Start();
        <span class="hljs-keyword">if</span> (MetricsExporter != <span class="hljs-literal">null</span>)
        {
            MetricsExporter.Start();
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Stop</span>(<span class="hljs-params"></span>)
    </span>{
        DiagnosticsManager.Instance.Stop();
        <span class="hljs-keyword">if</span> (MetricsExporter != <span class="hljs-literal">null</span>)
        {
            MetricsExporter.Stop();
        }
    }
}
</code></pre>

					<p>See the <a target="_blank" href="https://github.com/SteeltoeOSS/Samples/tree/dev/Management/src/AspDotNet4">Steeltoe Samples repository</a> for more details.</p>

				</div>
			</div>
		</div>
	</div>

	<script src="/javascripts/vendor/gumshoe.js"></script>
	<script src="/javascripts/vendor/highlight.min.js"></script>
	<script src="/javascripts/vendor/jquery-3.1.1.slim.min.js"></script>
	<script src="/javascripts/vendor/particles.min.js"></script>
	<script src="/javascripts/vendor/smooth-scroll.js"></script>
	<script src="/javascripts/vendor/sticky-kit.min.js"></script>
	<script src="/javascripts/vendor/svg-injector.min.js"></script>
	<script src="/javascripts/vendor/tocbot.min.js"></script>
	<script src="/javascripts/all.js"></script>
	<script src="/javascripts/docs.js"></script>
	<script>
		function viewV1() {
			window.location.href = '/1x/steeltoe-configuration/';
		}
					//document.getElementById('docselector').style.display = "inline";
	</script>


</body>
</html>